import{A as e,B as t,D as n,F as r,H as i,I as a,K as o,M as s,P as c,R as l,S as u,U as d,V as f,Y as p,c as m,d as h,h as g,i as _,j as v,k as y,l as b,m as x,tt as S,z as C}from"./index-BK-GGJM4.js";var w=u(`triangle-alert`,[[`path`,{d:`m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3`,key:`wmoenq`}],[`path`,{d:`M12 9v4`,key:`juzpu7`}],[`path`,{d:`M12 17h.01`,key:`p32p05`}]]),T=S(p(),1),E=S(e(),1);function D(){let{t:e}=o(),u=n(),{loginWithToken:p,user:S}=y(),[D,O]=(0,T.useState)(``),[k,A]=(0,T.useState)(``),[j,M]=(0,T.useState)(!1),[N,P]=(0,T.useState)(!1),[F,I]=(0,T.useState)(!1),[L,R]=(0,T.useState)(!1),[z,B]=(0,T.useState)(null),[V,H]=(0,T.useState)(``),[U,W]=(0,T.useState)(0),G=(0,T.useRef)(!1);(0,T.useEffect)(()=>{a();try{s(),delete v.defaults.headers.common.Authorization}catch{}},[]),(0,T.useEffect)(()=>{try{let e=localStorage.getItem(`admin_remembered_username`);localStorage.getItem(`admin_remember_me`)===`true`&&e&&(O(e),M(!0))}catch{}},[]),(0,T.useEffect)(()=>{S&&S.roles?.includes(`ADMIN`)&&u(`/admin/users`,{replace:!0})},[S,u]),(0,T.useEffect)(()=>{if(U<20){let e=setTimeout(()=>{H(e=>e+`administrator access`[U]),W(e=>e+1)},100);return()=>clearTimeout(e)}},[U]);function K(t,n=null){let r=e=>typeof e==`string`&&e.trim()?e.trim().toUpperCase():null;if(!t||typeof t!=`object`)return e(n===401?`errors.INVALID_CREDENTIALS`:n===423?`errors.ACCOUNT_LOCKED`:n===403?`errors.FORBIDDEN`:n===500?`errors.GENERAL_ERROR`:`errors.UNKNOWN_ERROR`);let i=null;if(!i&&typeof t.error==`string`&&(i=r(t.error)),!i&&typeof t.code==`string`&&(i=r(t.code)),!i&&typeof t.message==`string`&&/^[A-Za-z0-9_]+$/.test(t.message.trim())&&(i=r(t.message)),!i&&Array.isArray(t.fieldErrors)){let e=t.fieldErrors.find(e=>e&&typeof e.code==`string`&&e.code.trim());e&&(i=r(e.code))}if(!i&&t.errors&&typeof t.errors==`object`)try{let e=Object.values(t.errors).flat(),n=e.find(e=>typeof e==`string`&&e.trim())||(e.find(e=>e&&typeof e.code==`string`&&e.code.trim())||{}).code;n&&(i=r(n))}catch{}if(!i&&n===401&&(i=`INVALID_CREDENTIALS`),!i&&n===423&&(i=`ACCOUNT_LOCKED`),!i&&n===403&&(i=`FORBIDDEN`),!i&&n===500&&(i=`GENERAL_ERROR`),i){let t=`errors.${i}`,n=e(t,{defaultValue:``});if(n&&n!==t)return n}return e(`errors.UNKNOWN_ERROR`)}let q=(`https://api.flaboratory.cloud`.replace(/\/+$/,``)||``)+`/api/v1/auth/login`;async function J(e){return v.post(q,e,{meta:{public:!0,suppressError:!0}})}async function Y(n){if(n.preventDefault(),!G.current){if(B(null),!D){let t=e(`errors.USERNAME_REQUIRED`);B(t),d(t);return}if(!k){let t=e(`errors.PASSWORD_REQUIRED`);B(t),d(t);return}try{j?(localStorage.setItem(`admin_remembered_username`,D),localStorage.setItem(`admin_remember_me`,`true`)):(localStorage.removeItem(`admin_remembered_username`),localStorage.removeItem(`admin_remember_me`))}catch{}P(!0),G.current=!0;try{let n={username:D,password:k},a=null;try{a=await J(n)}catch(e){throw e}if(!a)throw Error(`NO_RESPONSE`);let o=a?.data||a,f=o?.token||o?.accessToken||o?.access_token,m=o?.refreshToken||o?.refresh||o?.refresh_token;if(f){if(c(f),m&&r(m),l(`admin`),(o.mustChangePassword||o.user?.mustChangePassword)===!0){t(e(`auth.must_change_password_first`,{defaultValue:`You must change your password before accessing the system`})),setTimeout(()=>{u(`/change-password-first-login`,{replace:!0,state:{isFirstLogin:!0,username:D,loginType:`admin`}})},800);return}try{let e=(await v.get(`/api/v1/auth/me`))?.data;if(!(e?.roles||[]).includes(`ADMIN`)){s(),delete v.defaults.headers.common.Authorization;let e=`Access denied. This portal is for administrators only.`;B(e),C(e),P(!1),G.current=!1;return}let t=(await v.get(`/api/v1/ui/accessible-screens`))?.data?.accessible_screens||[];try{await p(f,m,{...e,accessibleScreens:t})}catch{}await new Promise(e=>setTimeout(e,100)),R(!0),i(`Admin login successful`);let n=(await v.get(`/api/v1/screens/all`))?.data||[];n=n.sort((e,t)=>(e.ordering||999)-(t.ordering||999));let r=[`ADMIN_USERS_LIST`,`ADMIN_ROLES_LIST`,`ADMIN_PRIVILEGES_LIST`],a=n.filter(e=>r.includes(e.screen_code)&&t.includes(e.screen_code)).sort((e,t)=>r.indexOf(e.screen_code)-r.indexOf(t.screen_code))[0];a?window.location.href=a.path:window.location.href=`/admin/users`}catch{window.location.href=`/admin/users`}}else{let e=K(o);B(e),d(e),P(!1),G.current=!1}}catch(t){let n=t?.response?.data,r=K(n||{},t?.response?.status);B(r),t?.response?.status>=500?f(e(`admin.error`)||`Error`,r):d(r),P(!1),G.current=!1}}}return(0,E.jsxs)(`div`,{className:`min-h-screen bg-gradient-to-br from-[#0a1929] via-[#0d2137] to-[#051120] flex items-center justify-center px-4 py-6 md:py-10 overflow-hidden`,children:[L&&(0,E.jsx)(`div`,{className:`fixed inset-0 bg-gradient-to-br from-[#0a1929] to-[#051120] z-50 flex items-center justify-center animate-fade-in`,children:(0,E.jsxs)(`div`,{className:`text-center animate-scale-in`,children:[(0,E.jsx)(`div`,{className:`w-24 h-24 bg-white rounded-full flex items-center justify-center mb-6 mx-auto animate-bounce-once`,children:(0,E.jsx)(`svg`,{className:`w-12 h-12 text-blue-600`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,E.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:`3`,d:`M5 13l4 4L19 7`})})}),(0,E.jsx)(`h2`,{className:`text-4xl font-bold text-white mb-4`,children:`Welcome, Administrator`}),(0,E.jsx)(`p`,{className:`text-xl text-white/90`,children:`Accessing admin panel...`})]})}),(0,E.jsxs)(`div`,{className:`w-full max-w-6xl mx-auto grid lg:grid-cols-2 gap-8 lg:gap-12 items-center`,children:[(0,E.jsxs)(`div`,{className:`hidden lg:block space-y-8`,children:[(0,E.jsxs)(`div`,{className:`animate-slide-in-left`,style:{animationDelay:`0.2s`},children:[(0,E.jsxs)(`div`,{className:`inline-flex items-center gap-3 bg-[#0d2137]/80 backdrop-blur-sm px-5 py-3 rounded-full shadow-md mb-6 border border-[#1a3a52]`,children:[(0,E.jsx)(`div`,{className:`w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full flex items-center justify-center`,children:(0,E.jsx)(b,{className:`w-6 h-6 text-white`})}),(0,E.jsx)(`span`,{className:`font-bold text-xl text-white`,children:`F-Laboratory Admin`})]}),(0,E.jsxs)(`h1`,{className:`text-5xl font-bold text-white mb-4 leading-tight`,children:[`Secure access,`,(0,E.jsx)(`br`,{}),(0,E.jsxs)(`span`,{className:`bg-gradient-to-r from-blue-300 via-cyan-300 to-indigo-300 bg-clip-text text-transparent inline-block min-w-[400px]`,children:[V,(0,E.jsx)(`span`,{className:`animate-blink`,children:`|`})]}),(0,E.jsx)(`br`,{}),`control panel`]})]}),(0,E.jsxs)(`div`,{className:`animate-slide-in-left`,style:{animationDelay:`0.5s`},children:[(0,E.jsx)(`p`,{className:`text-lg text-slate-100 mb-6 leading-relaxed`,children:`Administrator portal — manage users, configure system settings, monitor activities, and control access permissions across the entire laboratory platform.`}),(0,E.jsx)(`div`,{className:`space-y-3 text-slate-50`,children:[`Full system administration`,`Advanced security controls`,`Real-time activity monitoring`].map((e,t)=>(0,E.jsxs)(`div`,{className:`flex items-center gap-3 animate-slide-in-left`,style:{animationDelay:`${.7+t*.1}s`},children:[(0,E.jsx)(`div`,{className:`w-5 h-5 rounded-full border-2 border-blue-300 flex items-center justify-center`,children:(0,E.jsx)(`div`,{className:`w-2 h-2 bg-blue-300 rounded-full`})}),(0,E.jsx)(`span`,{children:e})]},t))})]}),(0,E.jsxs)(`div`,{className:`bg-[#0d2137] border border-[#1a3a52] rounded-2xl shadow-lg p-5 md:p-6 max-w-md animate-float`,style:{animationDelay:`1s`},children:[(0,E.jsxs)(`div`,{className:`flex gap-2 mb-4`,children:[(0,E.jsx)(`div`,{className:`w-3 h-3 rounded-full bg-red-500 animate-pulse`}),(0,E.jsx)(`div`,{className:`w-3 h-3 rounded-full bg-yellow-500 animate-pulse`}),(0,E.jsx)(`div`,{className:`w-3 h-3 rounded-full bg-green-500 animate-pulse`})]}),(0,E.jsxs)(`div`,{className:`flex gap-4`,children:[(0,E.jsx)(`div`,{className:`w-32 h-24 bg-gradient-to-br from-blue-500 via-indigo-600 to-slate-700 rounded-xl animate-gradient`}),(0,E.jsxs)(`div`,{className:`flex-1 space-y-2`,children:[(0,E.jsx)(`div`,{className:`h-3 bg-slate-600 rounded-full w-full animate-pulse`}),(0,E.jsx)(`div`,{className:`h-3 bg-slate-600 rounded-full w-3/4 animate-pulse`}),(0,E.jsx)(`div`,{className:`h-3 bg-slate-600 rounded-full w-5/6 animate-pulse`})]})]})]})]}),(0,E.jsxs)(`div`,{className:`w-full max-w-lg mx-auto animate-pop-in`,style:{animationDelay:`0.4s`},children:[(0,E.jsxs)(`div`,{className:`bg-white rounded-3xl shadow-xl p-8 md:p-10 transform transition-all duration-300 hover:shadow-2xl`,children:[(0,E.jsxs)(`div`,{className:`mb-6`,children:[(0,E.jsx)(`div`,{className:`inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl mb-4 shadow-lg`,children:(0,E.jsx)(b,{className:`w-8 h-8 text-white`})}),(0,E.jsx)(`h3`,{className:`text-2xl md:text-3xl font-bold text-gray-800 mb-2`,children:`Admin Portal`}),(0,E.jsx)(`p`,{className:`text-gray-500 text-sm`,children:`Authorized personnel only`}),(0,E.jsxs)(`div`,{className:`mt-4 inline-flex items-center gap-2 px-4 py-2 bg-amber-50 border border-amber-200 rounded-lg`,children:[(0,E.jsx)(w,{className:`w-4 h-4 text-amber-600`}),(0,E.jsx)(`span`,{className:`text-xs text-amber-800 font-medium`,children:`Administrator access required`})]})]}),(0,E.jsxs)(`form`,{onSubmit:Y,className:`space-y-5`,children:[(0,E.jsxs)(`div`,{className:`transition-all duration-300 hover:translate-x-1`,children:[(0,E.jsxs)(`label`,{className:`flex items-center gap-2 text-sm font-medium text-gray-700 mb-2`,children:[(0,E.jsx)(m,{className:`w-4 h-4`}),`Admin Username`]}),(0,E.jsx)(`input`,{value:D,onChange:e=>O(e.target.value),required:!0,placeholder:`Enter admin username`,className:`w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent transition-all bg-slate-50`})]}),(0,E.jsxs)(`div`,{className:`transition-all duration-300 hover:translate-x-1`,children:[(0,E.jsxs)(`label`,{className:`flex items-center gap-2 text-sm font-medium text-gray-700 mb-2`,children:[(0,E.jsx)(h,{className:`w-4 h-4`}),`Admin Password`]}),(0,E.jsxs)(`div`,{className:`relative`,children:[(0,E.jsx)(`input`,{type:F?`text`:`password`,value:k,onChange:e=>A(e.target.value),required:!0,placeholder:`Enter admin password`,className:`w-full px-4 py-3 pr-12 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent transition-all bg-slate-50`}),(0,E.jsx)(`button`,{type:`button`,onClick:()=>I(!F),className:`absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors`,children:F?(0,E.jsx)(g,{className:`w-5 h-5`}):(0,E.jsx)(x,{className:`w-5 h-5`})})]})]}),z&&(0,E.jsx)(`div`,{className:`p-4 bg-red-50 border border-red-200 rounded-lg`,children:(0,E.jsx)(`p`,{className:`text-sm text-red-600`,children:z})}),(0,E.jsx)(`div`,{className:`flex items-center justify-between text-sm pt-1`,children:(0,E.jsxs)(`label`,{className:`flex items-center gap-2 cursor-pointer group`,children:[(0,E.jsx)(`input`,{type:`checkbox`,checked:j,onChange:e=>M(e.target.checked),className:`w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500 focus:ring-2 cursor-pointer`}),(0,E.jsx)(`span`,{className:`text-gray-600 group-hover:text-gray-800 transition-colors`,children:`Remember me`})]})}),(0,E.jsx)(`button`,{type:`submit`,disabled:N,className:`w-full py-3.5 bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-semibold rounded-lg hover:shadow-lg hover:shadow-blue-300/50 transition-all hover:scale-105 active:scale-95 disabled:opacity-70 disabled:cursor-not-allowed`,children:N?(0,E.jsx)(_,{size:22}):`Login to Admin Portal`})]}),(0,E.jsx)(`div`,{className:`mt-6 text-center`,children:(0,E.jsx)(`button`,{type:`button`,onClick:()=>{try{sessionStorage.setItem(`lm.shouldReloadLogin`,`true`)}catch{}u(`/login`)},className:`text-sm text-gray-600 hover:text-gray-800 transition-colors`,children:`← Back to regular login`})})]}),(0,E.jsx)(`div`,{className:`mt-6 text-center text-xs text-slate-300 animate-fade-in`,style:{animationDelay:`1.2s`},children:`© 2025 F-Laboratory Cloud — Admin Portal`})]})]}),(0,E.jsx)(`style`,{children:`
        @keyframes slide-in-left { from { opacity: 0; transform: translateX(-50px); } to { opacity: 1; transform: translateX(0); } }
        @keyframes pop-in { 0% { opacity: 0; transform: scale(0.8) translateY(20px); } 50% { transform: scale(1.05); } 100% { opacity: 1; transform: scale(1) translateY(0); } }
        @keyframes fade-in { from { opacity: 0; } to { opacity: 1; } }
        @keyframes float { 0%,100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
        @keyframes blink { 0%,100% { opacity: 1; } 50% { opacity: 0; } }
        @keyframes gradient { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
        @keyframes scale-in { from { transform: scale(0); } to { transform: scale(1); } }
        @keyframes bounce-once { 0%,100% { transform: translateY(0); } 25% { transform: translateY(-20px); } 50% { transform: translateY(0); } 75% { transform: translateY(-10px); } }
        .animate-slide-in-left { animation: slide-in-left .6s ease-out forwards; opacity: 0; }
        .animate-pop-in { animation: pop-in .6s cubic-bezier(.175,.885,.32,1.275) forwards; opacity: 0; }
        .animate-fade-in { animation: fade-in .6s ease-out forwards; opacity: 0; }
        .animate-float { animation: float 3s ease-in-out infinite; }
        .animate-blink { animation: blink 1s step-end infinite; }
        .animate-gradient { background-size: 200% 200%; animation: gradient 3s ease infinite; }
        .animate-scale-in { animation: scale-in .5s cubic-bezier(.175,.885,.32,1.275); }
        .animate-bounce-once { animation: bounce-once 1s ease; }
      `})]})}export{D as default};