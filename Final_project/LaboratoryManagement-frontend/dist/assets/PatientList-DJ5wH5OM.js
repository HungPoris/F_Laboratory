import{t as e}from"./circle-check-T5Aj_NOH.js";import{t}from"./funnel-BX6y-3pM.js";import{n,t as r}from"./useDebounce-Cx0DY7EU.js";import{t as i}from"./loader-circle-CGh2Y_RS.js";import{n as a,t as o}from"./trash-2-D1o_3E3w.js";import{t as s}from"./plus-C7x6RT7r.js";import{t as c}from"./search-CVa8GsAv.js";import{t as l}from"./user-check-BukfIEMx.js";import{t as u}from"./user-x-CTSHU_p0.js";import{A as d,D as f,G as p,Y as m,m as h,o as g,s as _,tt as v,y}from"./index-BK-GGJM4.js";import{t as b}from"./PaginationControls-B_SYzLFE.js";var x=v(m(),1),S=v(d(),1),C=`https://be2.flaboratory.cloud`;function w({message:t,type:r=`success`,onClose:i}){(0,x.useEffect)(()=>{let e=setTimeout(i,4e3);return()=>clearTimeout(e)},[i]);let a={success:(0,S.jsx)(e,{className:`w-5 h-5`}),error:(0,S.jsx)(y,{className:`w-5 h-5`}),info:(0,S.jsx)(n,{className:`w-5 h-5`})};return(0,S.jsx)(`div`,{className:`fixed top-6 right-6 z-50 animate-slideIn`,children:(0,S.jsxs)(`div`,{className:`bg-gradient-to-r ${{success:`from-emerald-500 to-teal-500 shadow-emerald-500/30`,error:`from-red-500 to-pink-500 shadow-red-500/30`,info:`from-blue-500 to-indigo-500 shadow-blue-500/30`}[r]} text-white px-6 py-4 rounded-2xl shadow-2xl flex items-center gap-3 min-w-[320px]`,children:[a[r],(0,S.jsx)(`span`,{className:`flex-1 font-medium`,children:t}),(0,S.jsx)(`button`,{onClick:i,className:`hover:bg-white/20 p-1 rounded-lg transition-colors`,children:(0,S.jsx)(g,{className:`w-4 h-4`})})]})})}function T({title:e,text:t,type:r=`warning`,onConfirm:i,onCancel:a}){return(0,S.jsx)(`div`,{className:`fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm animate-fadeIn`,children:(0,S.jsx)(`div`,{className:`bg-white rounded-3xl shadow-2xl p-8 max-w-md w-full mx-4 animate-scaleIn`,children:(0,S.jsxs)(`div`,{className:`flex flex-col items-center text-center gap-4`,children:[{warning:(0,S.jsx)(y,{className:`w-16 h-16 text-orange-500`}),danger:(0,S.jsx)(y,{className:`w-16 h-16 text-red-500`}),question:(0,S.jsx)(n,{className:`w-16 h-16 text-blue-500`})}[r],(0,S.jsx)(`h3`,{className:`text-2xl font-bold text-gray-900`,children:e}),(0,S.jsx)(`p`,{className:`text-gray-600`,children:t}),(0,S.jsxs)(`div`,{className:`flex gap-3 mt-4 w-full`,children:[(0,S.jsx)(`button`,{onClick:a,className:`flex-1 px-6 py-3 rounded-xl border-2 border-gray-200 hover:bg-gray-50 font-semibold text-gray-700 transition-all duration-200`,children:`Cancel`}),(0,S.jsx)(`button`,{onClick:i,className:`flex-1 px-6 py-3 rounded-xl bg-gradient-to-r from-red-500 to-pink-500 hover:from-red-600 hover:to-pink-600 text-white font-semibold shadow-lg shadow-red-500/30 hover:shadow-red-500/50 transition-all duration-200`,children:`Confirm`})]})]})})})}function E({name:e=``,gender:t=``}){let n=(e||`P`).slice(0,2).toUpperCase(),r={male:`from-blue-400 to-blue-600`,female:`from-pink-400 to-pink-600`,default:`from-purple-400 to-purple-600`};return(0,S.jsx)(`div`,{className:`w-11 h-11 rounded-xl bg-gradient-to-br ${t?.toLowerCase()===`male`?r.male:t?.toLowerCase()===`female`?r.female:r.default} flex items-center justify-center text-white font-bold shadow-lg`,children:n})}function D({open:e,onClose:t,onApply:n,initial:r}){let i=[{value:`name`,label:`Name`,type:`text`},{value:`phone`,label:`Phone`,type:`text`},{value:`email`,label:`Email`,type:`text`},{value:`gender`,label:`Gender`,type:`gender`},{value:`dob`,label:`DOB`,type:`date`}],a={text:[{value:`contains`,label:`contains`},{value:`equals`,label:`equals`},{value:`starts`,label:`starts with`},{value:`ends`,label:`ends with`}],gender:[{value:`is`,label:`is`},{value:`is_not`,label:`is not`}],date:[{value:`is`,label:`is`},{value:`before`,label:`before`},{value:`after`,label:`after`},{value:`between`,label:`between`}]},o={field:`name`,operator:`contains`,value:``,value2:``},[c,l]=(0,x.useState)(r?.filters||[o]),u=(e,t)=>{let n=i.find(e=>e.value===t).type;l(r=>r.map((r,i)=>i===e?{...r,field:t,operator:a[n][0].value,value:``,value2:``}:r))},d=(e,t)=>{l(n=>n.map((n,r)=>r===e?{...n,operator:t}:n))},f=(e,t,n)=>{l(r=>r.map((r,i)=>i===e?{...r,[t]:n}:r))},p=()=>{l([...c,{...o}])},m=e=>{l(c.filter((t,n)=>n!==e))};return e?(0,S.jsx)(`div`,{className:`fixed inset-0 z-50 flex items-center justify-center bg-black/40 animate-fadeIn p-4`,children:(0,S.jsxs)(`div`,{className:`bg-white rounded-3xl shadow-2xl w-full max-w-xl p-6 animate-scaleIn`,children:[(0,S.jsxs)(`div`,{className:`flex items-center justify-between mb-6`,children:[(0,S.jsx)(`h2`,{className:`text-xl font-bold text-gray-900`,children:`Filter`}),(0,S.jsx)(`button`,{onClick:t,className:`p-2 rounded-lg hover:bg-gray-100`,children:(0,S.jsx)(g,{className:`w-5 h-5 text-gray-500`})})]}),(0,S.jsx)(`div`,{className:`space-y-5`,children:c.map((e,t)=>{let n=i.find(t=>t.value===e.field).type;return(0,S.jsxs)(`div`,{className:`grid grid-cols-12 gap-3 items-center`,children:[(0,S.jsx)(`div`,{className:`col-span-4`,children:(0,S.jsx)(`select`,{value:e.field,onChange:e=>u(t,e.target.value),className:`w-full p-3 rounded-xl border focus:ring-2`,children:i.map(e=>(0,S.jsx)(`option`,{value:e.value,children:e.label},e.value))})}),(0,S.jsx)(`div`,{className:`col-span-4`,children:(0,S.jsx)(`select`,{value:e.operator,onChange:e=>d(t,e.target.value),className:`w-full p-3 rounded-xl border focus:ring-2`,children:a[n].map(e=>(0,S.jsx)(`option`,{value:e.value,children:e.label},e.value))})}),(0,S.jsx)(`div`,{className:`col-span-3`,children:n===`gender`?(0,S.jsxs)(`select`,{value:e.value,onChange:e=>f(t,`value`,e.target.value),className:`w-full p-3 rounded-xl border`,children:[(0,S.jsx)(`option`,{value:``,children:`Select`}),(0,S.jsx)(`option`,{value:`male`,children:`Male`}),(0,S.jsx)(`option`,{value:`female`,children:`Female`})]}):n===`date`&&e.operator===`between`?(0,S.jsxs)(`div`,{className:`flex gap-2`,children:[(0,S.jsx)(`input`,{type:`date`,value:e.value,onChange:e=>f(t,`value`,e.target.value),className:`p-2 rounded-lg border w-full`}),(0,S.jsx)(`input`,{type:`date`,value:e.value2,onChange:e=>f(t,`value2`,e.target.value),className:`p-2 rounded-lg border w-full`})]}):n===`date`?(0,S.jsx)(`input`,{type:`date`,value:e.value,onChange:e=>f(t,`value`,e.target.value),className:`w-full p-3 rounded-xl border`}):(0,S.jsx)(`input`,{type:`text`,value:e.value,onChange:e=>f(t,`value`,e.target.value),className:`w-full p-3 rounded-xl border`,placeholder:`Enter value...`})}),(0,S.jsx)(`div`,{className:`col-span-1 flex items-center justify-center`,children:c.length>1&&(0,S.jsx)(`button`,{onClick:()=>m(t),className:`p-2 hover:bg-gray-100 rounded-full`,children:(0,S.jsx)(g,{className:`w-5 h-5 text-gray-400`})})})]},t)})}),(0,S.jsxs)(`div`,{className:`flex items-center justify-between mt-5`,children:[(0,S.jsxs)(`button`,{onClick:p,className:`flex items-center gap-2 text-blue-600 font-medium`,children:[(0,S.jsx)(s,{className:`w-5 h-5`}),`Add filter`]}),(0,S.jsx)(`button`,{onClick:()=>l([{...o}]),className:`text-red-500 font-medium hover:underline`,children:`Clear all`})]}),(0,S.jsxs)(`div`,{className:`flex justify-end gap-3 mt-6`,children:[(0,S.jsx)(`button`,{onClick:t,className:`px-4 py-2 rounded-xl border`,children:`Cancel`}),(0,S.jsx)(`button`,{onClick:()=>n({filters:c}),className:`px-6 py-2 rounded-xl bg-gradient-to-r from-teal-500 to-emerald-500 text-white`,children:`Apply`})]})]})}):null}function O(){let e=f(),[n,d]=(0,x.useState)([]),[m,g]=(0,x.useState)(!0),[v,y]=(0,x.useState)(!1),[O,k]=(0,x.useState)(null),[A,j]=(0,x.useState)(``),M=r(A,500),[N,P]=(0,x.useState)(1),[F,I]=(0,x.useState)(10),[L,R]=(0,x.useState)(1),[z,B]=(0,x.useState)(0),[V,H]=(0,x.useState)(null),[U,W]=(0,x.useState)(null),[G,K]=(0,x.useState)(!1),[q,J]=(0,x.useState)({filters:[]}),[Y,X]=(0,x.useState)({total:0,male:0,female:0}),Z=(e,t=`success`)=>{H({message:e,type:t})},ee=(e,t,n)=>{let r={page:t-1,size:n};return e?.filters&&e.filters.forEach(e=>{e.value&&(e.field===`name`&&(r.name=e.value),e.field===`phone`&&(r.phone=e.value),e.field===`email`&&(r.email=e.value),e.field===`gender`&&(r.gender=e.value),e.field===`dob`&&(r.dob=e.value,r.dobOperator=e.operator,e.operator===`between`&&(r.dobTo=e.value2)))}),r},Q=async(e=``,t=!1)=>{try{t?g(!0):y(!0),k(null);let n=localStorage.getItem(`lm.access`),r=`${C}/api/v1/patients`,i=ee(q,N,F);e&&e.trim()!==``&&(i.name=e.trim());let a=(await p.get(r,{headers:{Authorization:`Bearer ${n}`},params:i})).data;d(a.items||[]),R(a.totalPages||1),B(a.totalElements||0)}catch(e){console.error(`Failed to load patients:`,e),k(`Failed to load patients`),Z(`Failed to load patients`,`error`)}finally{g(!1),y(!1)}},$=async()=>{try{let e=localStorage.getItem(`lm.access`),t=`${C}/api/v1/patients/stats`,n=await p.get(t,{headers:{Authorization:`Bearer ${e}`}});X({total:n.data.total||0,male:n.data.male||0,female:n.data.female||0})}catch(e){console.error(`Failed to load stats:`,e)}};(0,x.useEffect)(()=>{Q(M,n.length===0),$()},[M,N,F,q]);let te=e=>{W({title:`Delete Patient?`,text:`Are you sure you want to delete ${e.fullName}?`,type:`danger`,onConfirm:()=>{W(null),p.delete(`${C}/api/v1/patients/${e.patientId}`,{headers:{Authorization:`Bearer ${localStorage.getItem(`lm.access`)}`}}).then(()=>{Z(`Patient deleted successfully`,`success`),Q(M),$()}).catch(()=>Z(`Failed to delete patient`,`error`))},onCancel:()=>W(null)})};return(N-1)*F,m&&n.length===0?(0,S.jsx)(`div`,{className:`flex items-center justify-center min-h-screen bg-gradient-to-br from-gray-50 to-gray-100`,children:(0,S.jsxs)(`div`,{className:`text-center`,children:[(0,S.jsx)(`div`,{className:`inline-block animate-spin rounded-full h-16 w-16 border-4 border-teal-200 border-t-teal-600 mb-4`}),(0,S.jsx)(`p`,{className:`text-gray-700 font-medium`,children:`Loading patients...`})]})}):(0,S.jsxs)(`div`,{className:`p-6 bg-gradient-to-br from-gray-50 to-gray-100 min-h-screen`,children:[V&&(0,S.jsx)(w,{...V,onClose:()=>H(null)}),U&&(0,S.jsx)(T,{...U}),(0,S.jsx)(D,{open:G,onClose:()=>K(!1),onApply:e=>{J(e),P(1),K(!1)},initial:q}),(0,S.jsxs)(`div`,{className:`max-w-7xl mx-auto`,children:[(0,S.jsx)(`div`,{className:`mb-8`,children:(0,S.jsxs)(`div`,{className:`flex items-center gap-4 mb-3`,children:[(0,S.jsx)(`div`,{className:`w-12 h-12 rounded-2xl bg-gradient-to-br from-teal-500 to-emerald-500 flex items-center justify-center shadow-lg`,children:(0,S.jsx)(_,{className:`w-6 h-6 text-white`})}),(0,S.jsxs)(`div`,{children:[(0,S.jsx)(`h1`,{className:`text-4xl font-bold text-gray-900`,children:`Patient List`}),(0,S.jsx)(`p`,{className:`text-gray-500 mt-1`,children:`Manage and view all patients`})]})]})}),(0,S.jsx)(`div`,{className:`grid grid-cols-1 md:grid-cols-3 gap-4 mb-6`,children:[{label:`Total Patients`,value:Y.total,icon:_,iconColor:`text-cyan-600`,bgColor:`bg-cyan-50`},{label:`Male Patients`,value:Y.male,icon:l,iconColor:`text-blue-600`,bgColor:`bg-blue-50`},{label:`Female Patients`,value:Y.female,icon:l,iconColor:`text-pink-600`,bgColor:`bg-pink-50`}].map((e,t)=>{let n=e.icon;return(0,S.jsx)(`div`,{className:`bg-white rounded-2xl p-5 shadow-sm border border-gray-200 hover:shadow-xl transition-all duration-300`,children:(0,S.jsxs)(`div`,{className:`flex items-center justify-between`,children:[(0,S.jsxs)(`div`,{children:[(0,S.jsx)(`p`,{className:`text-gray-500 text-sm`,children:e.label}),(0,S.jsx)(`p`,{className:`text-3xl	font-bold text-gray-900 mt-1`,children:e.value})]}),(0,S.jsx)(`div`,{className:`w-14 h-14 rounded-2xl ${e.bgColor} flex items-center justify-center`,children:(0,S.jsx)(n,{className:`w-8 h-8 ${e.iconColor}`})})]})},t)})}),(0,S.jsxs)(`div`,{className:`bg-white rounded-3xl shadow-xl border border-gray-200 overflow-hidden`,children:[(0,S.jsx)(`div`,{className:`p-6 border-b bg-gradient-to-r from-gray-50 to-white`,children:(0,S.jsxs)(`div`,{className:`flex flex-col sm:flex-row gap-4 items-center justify-between`,children:[(0,S.jsx)(`div`,{className:`flex-1 w-full`,children:(0,S.jsxs)(`div`,{className:`relative group`,children:[(0,S.jsx)(`div`,{className:`absolute left-4 top-1/2 -translate-y-1/2`,children:v?(0,S.jsx)(i,{className:`w-5 h-5 text-teal-500 animate-spin`}):(0,S.jsx)(c,{className:`w-5 h-5 text-gray-400 group-focus-within:text-teal-500 transition-colors`})}),(0,S.jsx)(`input`,{value:A,onChange:e=>j(e.target.value),placeholder:`Search by name...`,className:`w-full pl-12 pr-4 py-3.5 border-2 border-gray-200 rounded-2xl bg-white focus:outline-none focus:ring-2 focus:ring-teal-500/20 focus:border-teal-500 transition-all`})]})}),(0,S.jsxs)(`div`,{className:`flex gap-3`,children:[(0,S.jsxs)(`button`,{onClick:()=>K(!0),className:`px-5 py-3.5 rounded-2xl border-2 border-gray-200 hover:border-gray-300 hover:bg-gray-50 transition-all duration-200 flex items-center gap-2 text-gray-700 font-medium hover:shadow-lg`,children:[(0,S.jsx)(t,{className:`w-4 h-4`}),(0,S.jsx)(`span`,{className:`hidden sm:inline`,children:`Filter`})]}),(0,S.jsxs)(`button`,{onClick:()=>e(`/patients/new`),className:`px-6 py-3.5 rounded-2xl bg-gradient-to-r from-teal-500 to-emerald-500 text-white flex items-center gap-2`,children:[(0,S.jsx)(s,{className:`w-5 h-5`}),` Add Patient`]})]})]})}),(0,S.jsx)(`div`,{className:`overflow-x-auto relative`,children:(0,S.jsxs)(`table`,{className:`w-full`,children:[(0,S.jsx)(`thead`,{className:`bg-gray-50`,children:(0,S.jsxs)(`tr`,{children:[(0,S.jsx)(`th`,{className:`px-6 py-4 text-xs font-bold uppercase text-left`,children:`ID`}),(0,S.jsx)(`th`,{className:`px-6 py-4 text-xs font-bold uppercase text-left`,children:`Patient`}),(0,S.jsx)(`th`,{className:`px-6 py-4 text-xs font-bold uppercase text-left`,children:`DOB`}),(0,S.jsx)(`th`,{className:`px-6 py-4 text-xs font-bold uppercase text-left`,children:`Gender`}),(0,S.jsx)(`th`,{className:`px-6 py-4 text-xs font-bold uppercase text-left`,children:`Email`}),(0,S.jsx)(`th`,{className:`px-6 py-4 text-xs font-bold uppercase text-center`,children:`Actions`})]})}),(0,S.jsxs)(`tbody`,{className:`divide-y divide-gray-100`,children:[n.map((t,n)=>(0,S.jsxs)(`tr`,{className:`hover:bg-gray-50`,children:[(0,S.jsx)(`td`,{className:`px-6 py-5 font-mono text-xs text-gray-600`,children:t.patientId.slice(0,6).toUpperCase()}),(0,S.jsx)(`td`,{className:`px-6 py-5`,children:(0,S.jsxs)(`div`,{className:`flex items-center gap-4`,children:[(0,S.jsx)(E,{name:t.fullName,gender:t.gender}),(0,S.jsx)(`div`,{className:`font-semibold text-gray-900`,children:t.fullName})]})}),(0,S.jsx)(`td`,{className:`px-6 py-5`,children:t.dob}),(0,S.jsx)(`td`,{className:`px-6 py-5`,children:(0,S.jsx)(`span`,{className:`px-3 py-1 rounded-full text-xs font-medium ${t.gender?.toLowerCase()===`male`?`bg-blue-100 text-blue-700`:`bg-pink-100 text-pink-700`}`,children:t.gender})}),(0,S.jsx)(`td`,{className:`px-6 py-5`,children:t.email}),(0,S.jsxs)(`td`,{className:`px-6 py-5 text-center flex justify-center gap-2`,children:[(0,S.jsx)(`button`,{onClick:()=>e(`/patients/${t.patientId}`),className:`p-2 rounded-xl hover:bg-teal-50`,children:(0,S.jsx)(h,{className:`w-5 h-5 text-teal-600`})}),(0,S.jsx)(`button`,{onClick:()=>e(`/patients/${t.patientId}/edit`),className:`p-2 rounded-xl hover:bg-blue-50`,children:(0,S.jsx)(a,{className:`w-5 h-5 text-blue-600`})}),(0,S.jsx)(`button`,{onClick:()=>te(t),className:`p-2 rounded-xl hover:bg-red-50`,children:(0,S.jsx)(o,{className:`w-5 h-5 text-red-600`})})]})]},t.patientId)),n.length===0&&(0,S.jsx)(`tr`,{children:(0,S.jsx)(`td`,{colSpan:7,className:`px-6 py-20 text-center`,children:(0,S.jsxs)(`div`,{className:`flex flex-col items-center`,children:[(0,S.jsx)(u,{className:`w-12 h-12 text-gray-400`}),(0,S.jsx)(`p`,{className:`text-gray-600 mt-3`,children:`No patients found`})]})})})]})]})}),(0,S.jsx)(b,{page:N-1,size:F,currentPageSize:n.length,totalElements:z,totalPages:L,onPageChange:e=>{P(e+1)},onSizeChange:e=>{I(e),P(1)}})]})]}),(0,S.jsx)(`style`,{children:`
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes scaleIn { from { opacity: 0; transform: scale(0.9); } to { opacity: 1; transform: scale(1); } }
        @keyframes slideIn { from { opacity: 0; transform: translateX(100px); } to { opacity: 1; transform: translateX(0); } }
      `})]})}export{O as default};