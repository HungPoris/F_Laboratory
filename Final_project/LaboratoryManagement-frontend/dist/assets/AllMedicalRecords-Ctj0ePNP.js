import{t as e}from"./circle-check-T5Aj_NOH.js";import{n as t,t as n}from"./useDebounce-Cx0DY7EU.js";import{t as r}from"./loader-circle-CGh2Y_RS.js";import{t as i}from"./search-CVa8GsAv.js";import{A as a,D as o,S as s,Y as c,j as l,m as u,o as d,p as f,tt as p,y as m}from"./index-BK-GGJM4.js";var h=s(`search-code`,[[`path`,{d:`m13 13.5 2-2.5-2-2.5`,key:`1rvxrh`}],[`path`,{d:`m21 21-4.3-4.3`,key:`1qie3q`}],[`path`,{d:`M9 8.5 7 11l2 2.5`,key:`6ffwbx`}],[`circle`,{cx:`11`,cy:`11`,r:`8`,key:`4ej97u`}]]),g=p(c(),1),_=`https://be2.flaboratory.cloud`;const v=async e=>{try{return(await l.get(`${_}/api/v1/patient/all-medical-records`,{params:e})).data}catch(e){throw console.error(`Error fetching system medical records:`,e),e}};var y=p(a(),1);function b({message:n,type:r=`success`,onClose:i}){(0,g.useEffect)(()=>{let e=setTimeout(i,4e3);return()=>clearTimeout(e)},[i]);let a={success:(0,y.jsx)(e,{className:`w-5 h-5`}),error:(0,y.jsx)(m,{className:`w-5 h-5`}),info:(0,y.jsx)(t,{className:`w-5 h-5`})};return(0,y.jsx)(`div`,{className:`fixed top-6 right-6 z-50 animate-slideIn`,children:(0,y.jsxs)(`div`,{className:`bg-gradient-to-r ${{success:`from-emerald-500 to-teal-500 shadow-emerald-500/30`,error:`from-red-500 to-pink-500 shadow-red-500/30`,info:`from-blue-500 to-indigo-500 shadow-blue-500/30`}[r]} text-white px-6 py-4 rounded-2xl shadow-2xl flex items-center gap-3 min-w-[320px]`,children:[a[r],(0,y.jsx)(`span`,{className:`flex-1 font-medium`,children:n}),(0,y.jsx)(`button`,{onClick:i,className:`hover:bg-white/20 p-1 rounded-lg transition-colors`,children:(0,y.jsx)(d,{className:`w-4 h-4`})})]})})}var x=()=>{let e=o(),[t,a]=(0,g.useState)([]),[s,c]=(0,g.useState)(!1),[l,d]=(0,g.useState)(!1),[p,m]=(0,g.useState)(null),[_,x]=(0,g.useState)(``),S=n(_,500),[C,w]=(0,g.useState)(!1),[T,E]=(0,g.useState)(1),[D]=(0,g.useState)(10),[O,k]=(0,g.useState)(0),[A,j]=(0,g.useState)(0),[M,N]=(0,g.useState)(null),P=(e,t=`success`)=>{N({message:e,type:t})},F=e=>/^[\p{L}\p{M}\d\s]+$/u.test(e.trim()),I=e=>{let t=e.target.value;x(t),E(1)};(0,g.useEffect)(()=>{(async()=>{if(!S.trim()){a([]),j(0),k(0),w(!1);return}if(!F(S)){P(`Search only accepts letters and numbers (no special characters)`,`error`);return}try{c(!0),d(!0);let e=await v({page:T-1,size:D,search:S});e&&Array.isArray(e.items)?(a(e.items),j(e.totalElements),k(e.totalPages),w(!0)):(a([]),j(0))}catch{P(`Failed to load records`,`error`)}finally{c(!1),d(!1)}})()},[S,T]);let L=t,R=(T-1)*D;return(0,y.jsxs)(`div`,{className:`p-6 bg-gradient-to-br from-gray-50 to-gray-100 min-h-screen`,children:[M&&(0,y.jsx)(b,{...M,onClose:()=>N(null)}),(0,y.jsxs)(`div`,{className:`max-w-7xl mx-auto`,children:[(0,y.jsx)(`div`,{className:`mb-8`,children:(0,y.jsxs)(`div`,{className:`flex items-center gap-4 mb-3`,children:[(0,y.jsx)(`div`,{className:`w-12 h-12 rounded-2xl bg-gradient-to-br from-teal-500 to-emerald-500 flex items-center justify-center shadow-lg shadow-teal-500/30`,children:(0,y.jsx)(f,{className:`w-6 h-6 text-white`})}),(0,y.jsxs)(`div`,{children:[(0,y.jsx)(`h1`,{className:`text-4xl font-bold text-gray-900`,children:`Medical Records`}),(0,y.jsx)(`p`,{className:`text-gray-500 mt-1`,children:`Search medical records`})]})]})}),(0,y.jsxs)(`div`,{className:`bg-white rounded-3xl shadow-xl border border-gray-200 overflow-hidden`,children:[(0,y.jsx)(`div`,{className:`p-6 border-b bg-gradient-to-r from-gray-50 to-white`,children:(0,y.jsx)(`div`,{className:`flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between`,children:(0,y.jsx)(`div`,{className:`flex-1 w-full sm:w-auto`,children:(0,y.jsxs)(`div`,{className:`relative group`,children:[(0,y.jsx)(`div`,{className:`absolute left-4 top-1/2 -translate-y-1/2`,children:l?(0,y.jsx)(r,{className:`w-5 h-5 text-teal-500 animate-spin`}):(0,y.jsx)(i,{className:`w-5 h-5 text-gray-400`})}),(0,y.jsx)(`input`,{value:_,onChange:I,placeholder:`Search by Patient Name or Record Code...`,className:`w-full pl-12 pr-4 py-3.5 border-2 border-gray-200 rounded-2xl focus:ring-2 focus:ring-teal-500/20 shadow-sm`})]})})})}),(0,y.jsxs)(`div`,{className:`overflow-x-auto relative min-h-[400px]`,children:[l&&(0,y.jsx)(`div`,{className:`absolute inset-0 bg-white/60 z-10 flex justify-center pt-32`}),(0,y.jsxs)(`table`,{className:`w-full`,children:[(0,y.jsx)(`thead`,{children:(0,y.jsxs)(`tr`,{className:`bg-gray-50`,children:[(0,y.jsx)(`th`,{className:`px-6 py-4 text-xs font-bold text-gray-600 uppercase`,children:`No.`}),(0,y.jsx)(`th`,{className:`px-6 py-4 text-xs font-bold text-gray-600 uppercase`,children:`Record Code`}),(0,y.jsx)(`th`,{className:`px-6 py-4 text-xs font-bold text-gray-600 uppercase`,children:`Patient`}),(0,y.jsx)(`th`,{className:`px-6 py-4 text-xs font-bold text-gray-600 uppercase`,children:`Diagnosis`}),(0,y.jsx)(`th`,{className:`px-6 py-4 text-xs font-bold text-gray-600 uppercase`,children:`Visit Date`}),(0,y.jsx)(`th`,{className:`px-6 py-4 text-xs font-bold text-gray-600 uppercase text-center`,children:`Actions`})]})}),(0,y.jsxs)(`tbody`,{className:`divide-y divide-gray-100`,children:[!C&&(0,y.jsx)(`tr`,{children:(0,y.jsx)(`td`,{colSpan:6,className:`px-6 py-32 text-center`,children:(0,y.jsxs)(`div`,{className:`flex flex-col items-center gap-4`,children:[(0,y.jsx)(`div`,{className:`w-24 h-24 bg-teal-50 rounded-full flex items-center justify-center`,children:(0,y.jsx)(h,{className:`w-12 h-12 text-teal-500`})}),(0,y.jsx)(`h3`,{className:`text-xl font-semibold text-gray-700`,children:`Ready to search`}),(0,y.jsx)(`p`,{className:`text-gray-500`,children:`Enter a record code or patient name to begin.`})]})})}),C&&L.map((t,n)=>(0,y.jsxs)(`tr`,{className:`hover:bg-gray-50 transition-all`,children:[(0,y.jsx)(`td`,{className:`px-6 py-5`,children:R+n+1}),(0,y.jsx)(`td`,{className:`px-6 py-5`,children:(0,y.jsx)(`span`,{className:`text-sm font-mono bg-teal-50 text-teal-600 px-3 py-1.5 rounded-lg`,children:t.recordCode})}),(0,y.jsx)(`td`,{className:`px-6 py-5 font-semibold text-gray-900`,children:t.patientName}),(0,y.jsx)(`td`,{className:`px-6 py-5 text-gray-700`,children:t.diagnosis||(0,y.jsx)(`span`,{className:`italic text-gray-400`,children:`No diagnosis`})}),(0,y.jsx)(`td`,{className:`px-6 py-5`,children:t.visitDate?new Date(t.visitDate).toLocaleDateString(`en-US`,{year:`numeric`,month:`short`,day:`numeric`}):(0,y.jsx)(`span`,{className:`text-gray-400`,children:`N/A`})}),(0,y.jsx)(`td`,{className:`px-6 py-5 text-center`,children:(0,y.jsx)(`button`,{onClick:()=>e(`/patients/${t.patientId}/medical-records/${t.medicalRecordId}`),className:`p-2.5 rounded-xl hover:bg-teal-50 transition-all shadow-sm`,children:(0,y.jsx)(u,{className:`w-4 h-4 text-teal-600`})})})]},t.medicalRecordId)),C&&!l&&L.length===0&&(0,y.jsx)(`tr`,{children:(0,y.jsx)(`td`,{colSpan:6,className:`px-6 py-20 text-center`,children:(0,y.jsxs)(`div`,{className:`flex flex-col items-center gap-4`,children:[(0,y.jsx)(`div`,{className:`w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center`,children:(0,y.jsx)(f,{className:`w-10 h-10 text-gray-400`})}),(0,y.jsx)(`p`,{className:`text-lg font-semibold text-gray-700`,children:`No records found`})]})})})]})]})]}),C&&A>0&&(0,y.jsxs)(`div`,{className:`p-6 bg-gray-50 border-t flex items-center justify-between`,children:[(0,y.jsxs)(`p`,{className:`text-sm text-gray-600`,children:[`Showing `,(0,y.jsx)(`b`,{children:R+1}),`â€“`,(0,y.jsx)(`b`,{children:Math.min(R+D,A)}),` of`,` `,(0,y.jsx)(`b`,{children:A})]}),(0,y.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,y.jsx)(`button`,{disabled:T===1,onClick:()=>E(e=>Math.max(e-1,1)),className:`px-4 py-2 bg-white border rounded-xl disabled:opacity-50`,children:`Previous`}),(0,y.jsx)(`button`,{disabled:T===O,onClick:()=>E(e=>Math.min(e+1,O)),className:`px-4 py-2 bg-white border rounded-xl disabled:opacity-50`,children:`Next`})]})]})]})]})]})};export{x as default};