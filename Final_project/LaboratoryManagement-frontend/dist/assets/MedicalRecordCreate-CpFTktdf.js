import{t as e}from"./calendar-aV5gGbf_.js";import{t}from"./chevron-down-5citax4K.js";import{t as n}from"./clipboard-list-CdGJzdwV.js";import{t as r}from"./message-square-CCLenbod.js";import{A as i,D as a,G as o,O as s,S as c,W as l,Y as u,p as d,tt as f,x as p}from"./index-BK-GGJM4.js";var m=c(`circle-plus`,[[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}],[`path`,{d:`M8 12h8`,key:`1wcyev`}],[`path`,{d:`M12 8v8`,key:`napkw2`}]]),h=f(u(),1),g=f(l(),1),_=f(i(),1),v=`https://be2.flaboratory.cloud`;function y(){let{patientId:i}=s(),c=a(),l=()=>{let e=new Date,t=e.getTimezoneOffset();return new Date(e.getTime()-t*6e4).toISOString().slice(0,16)},u=[`Internal Medicine`,`Surgery`,`Cardiology`,`ENT`,`Pediatrics`,`Dermatology`],f=(0,h.useRef)(null),[y,b]=(0,h.useState)(!1),[x,S]=(0,h.useState)({visitDate:l(),diagnosis:``,chiefComplaint:``,departments:[],clinicalNotes:``}),[C,w]=(0,h.useState)({});(0,h.useEffect)(()=>{let e=e=>{f.current&&!f.current.contains(e.target)&&b(!1)};return document.addEventListener(`mousedown`,e),()=>document.removeEventListener(`mousedown`,e)},[]);let T=e=>{S(t=>({...t,departments:t.departments.includes(e)?t.departments.filter(t=>t!==e):[...t.departments,e]}))},E=()=>{let e={};return x.visitDate||(e.visitDate=`Visit date is required`),x.chiefComplaint.trim()||(e.chiefComplaint=`Chief complaint is required`),x.departments.length===0&&(e.departments=`Please select at least one department`),w(e),Object.keys(e).length===0};return(0,_.jsx)(_.Fragment,{children:(0,_.jsxs)(`div`,{className:`min-h-screen bg-gradient-to-br from-emerald-50 via-sky-50 to-indigo-50 p-6`,children:[(0,_.jsxs)(`button`,{onClick:()=>c(`/patients/${i}`),className:`inline-flex items-center gap-2 text-gray-600 hover:text-emerald-600 mb-6`,children:[(0,_.jsx)(p,{className:`w-5 h-5`}),`Back to Patient Details`]}),(0,_.jsxs)(`div`,{className:`bg-white p-8 rounded-3xl shadow-xl`,children:[(0,_.jsxs)(`div`,{className:`flex items-center gap-3 mb-8`,children:[(0,_.jsx)(`div`,{className:`p-3 rounded-2xl bg-gradient-to-br from-emerald-500 to-sky-600`,children:(0,_.jsx)(m,{className:`w-8 h-8 text-white`})}),(0,_.jsxs)(`div`,{children:[(0,_.jsx)(`h1`,{className:`text-3xl font-bold bg-gradient-to-r from-emerald-600 to-sky-600 bg-clip-text text-transparent`,children:`Create New Medical Record`}),(0,_.jsx)(`p`,{className:`text-sm text-gray-500 mt-1`,children:`Fill in the medical record details below`})]})]}),(0,_.jsxs)(`form`,{onSubmit:async e=>{if(e.preventDefault(),!E())return;if(x.departments.length===0){g.default.fire({icon:`warning`,title:`Missing Department`,text:`Please select at least one department.`});return}let t=localStorage.getItem(`lm.access`),n={patientId:i,visitDate:x.visitDate,diagnosis:x.diagnosis||null,chiefComplaint:x.chiefComplaint,departments:x.departments,clinicalNotes:{note:x.clinicalNotes}};try{await o.post(`${v}/api/v1/patients/${i}/medical-records`,n,{headers:{Authorization:`Bearer ${t}`,"Content-Type":`application/json`}}),g.default.fire({icon:`success`,title:`Success`,text:`Medical record created successfully!`,timer:1500}),c(`/patients/${i}`)}catch(e){g.default.fire({icon:`error`,title:`Error`,text:e.response?.data?.message||`Failed to create medical record.`})}},className:`space-y-6`,children:[(0,_.jsxs)(`div`,{children:[(0,_.jsxs)(`label`,{className:`block text-sm font-medium text-gray-700 mb-2`,children:[`Visit Date `,(0,_.jsx)(`span`,{className:`text-red-500`,children:`*`})]}),(0,_.jsxs)(`div`,{className:`relative`,children:[(0,_.jsx)(e,{className:`absolute left-3 top-3.5 w-5 h-5 text-gray-400 pointer-events-none`}),(0,_.jsx)(`input`,{type:`datetime-local`,name:`visitDate`,value:x.visitDate,onChange:e=>S(t=>({...t,visitDate:e.target.value})),className:`w-full rounded-xl border-2 border-emerald-200 pl-10 pr-4 py-3 focus:border-emerald-500 focus:outline-none transition-colors`})]}),C.visitDate&&(0,_.jsx)(`p`,{className:`text-red-500 text-sm mt-1`,children:C.visitDate})]}),(0,_.jsxs)(`div`,{children:[(0,_.jsxs)(`label`,{className:`block text-sm font-medium text-gray-700 mb-2`,children:[`Chief Complaint `,(0,_.jsx)(`span`,{className:`text-red-500`,children:`*`})]}),(0,_.jsxs)(`div`,{className:`relative`,children:[(0,_.jsx)(r,{className:`absolute left-3 top-3.5 w-5 h-5 text-gray-400 pointer-events-none`}),(0,_.jsx)(`input`,{type:`text`,placeholder:`Enter chief complaint...`,value:x.chiefComplaint,onChange:e=>S(t=>({...t,chiefComplaint:e.target.value})),className:`w-full rounded-xl border-2 border-emerald-200 pl-10 pr-4 py-3 focus:border-emerald-500 focus:outline-none transition-colors`})]}),C.chiefComplaint&&(0,_.jsx)(`p`,{className:`text-red-500 text-sm mt-1`,children:C.chiefComplaint})]}),(0,_.jsxs)(`div`,{children:[(0,_.jsx)(`label`,{className:`block text-sm font-medium text-gray-700 mb-2`,children:`Diagnosis`}),(0,_.jsxs)(`div`,{className:`relative`,children:[(0,_.jsx)(n,{className:`absolute left-3 top-3.5 w-5 h-5 text-gray-400 pointer-events-none`}),(0,_.jsx)(`input`,{type:`text`,name:`diagnosis`,value:x.diagnosis,onChange:e=>S(t=>({...t,diagnosis:e.target.value})),className:`w-full rounded-xl border-2 border-emerald-200 pl-10 pr-4 py-3 focus:border-emerald-500 focus:outline-none transition-colors`,placeholder:`Enter diagnosis`})]})]}),(0,_.jsxs)(`div`,{ref:f,children:[(0,_.jsxs)(`label`,{className:`block text-sm font-medium text-gray-700 mb-2`,children:[`Department `,(0,_.jsx)(`span`,{className:`text-red-500`,children:`*`})]}),(0,_.jsxs)(`button`,{type:`button`,onClick:()=>b(e=>!e),className:`w-full border-2 border-emerald-200 rounded-xl px-4 py-3 text-left flex items-center gap-2 hover:border-emerald-400 transition-colors`,children:[(0,_.jsx)(r,{className:`w-5 h-5 text-gray-400`}),(0,_.jsx)(`span`,{className:`text-gray-700`,children:x.departments.length===0?`Select departments`:`${x.departments.length} selected`}),(0,_.jsx)(t,{className:`ml-auto text-gray-500`})]}),y&&(0,_.jsxs)(`div`,{className:`mt-2 bg-white border-2 border-emerald-200 rounded-2xl shadow-lg p-4 max-h-[300px] overflow-y-auto z-50`,children:[(0,_.jsx)(`h3`,{className:`font-semibold mb-2`,children:`Departments`}),u.map(e=>(0,_.jsxs)(`label`,{className:`flex items-center gap-2 py-1 cursor-pointer hover:bg-emerald-50 rounded px-2 transition-colors`,children:[(0,_.jsx)(`input`,{type:`checkbox`,checked:x.departments.includes(e),onChange:()=>T(e),className:`accent-emerald-500`}),(0,_.jsx)(`span`,{children:e})]},e))]}),C.departments&&(0,_.jsx)(`p`,{className:`text-red-500 text-sm mt-2`,children:C.departments})]}),(0,_.jsxs)(`div`,{className:`flex flex-col gap-2 mt-3`,children:[x.chiefComplaint.trim()!==``&&(0,_.jsxs)(`span`,{className:`px-3 py-2 rounded-xl font-medium border-2 border-emerald-200 text-gray-800 bg-emerald-50`,children:[(0,_.jsx)(`b`,{children:`Chief Complaint:`}),` `,x.chiefComplaint]}),x.departments.length>0&&(0,_.jsxs)(`span`,{className:`px-3 py-2 rounded-xl font-medium border-2 border-sky-200 text-gray-800 bg-sky-50`,children:[(0,_.jsx)(`b`,{children:`Departments:`}),` `,x.departments.join(`, `)]})]}),(0,_.jsxs)(`div`,{children:[(0,_.jsx)(`label`,{className:`block text-sm font-medium text-gray-700 mb-2`,children:`Clinical Notes`}),(0,_.jsxs)(`div`,{className:`relative`,children:[(0,_.jsx)(d,{className:`absolute left-3 top-3.5 w-5 h-5 text-gray-400 pointer-events-none`}),(0,_.jsx)(`textarea`,{name:`clinicalNotes`,rows:`4`,value:x.clinicalNotes,onChange:e=>S(t=>({...t,clinicalNotes:e.target.value})),className:`w-full rounded-xl border-2 border-emerald-200 pl-10 pr-4 py-3 resize-none focus:border-emerald-500 focus:outline-none transition-colors`,placeholder:`Enter clinical notes...`})]})]}),(0,_.jsxs)(`div`,{className:`flex justify-end gap-4 pt-6 border-t`,children:[(0,_.jsx)(`button`,{type:`button`,onClick:()=>c(`/patients/${i}`),className:`px-6 py-3 rounded-xl border-2 border-gray-200 hover:bg-gray-50 transition-all`,children:`Cancel`}),(0,_.jsxs)(`button`,{type:`submit`,className:`px-8 py-3 rounded-xl text-white font-medium shadow-lg bg-gradient-to-r from-emerald-500 to-sky-600 hover:from-sky-600 hover:to-emerald-500 flex items-center gap-2 transition-all`,children:[(0,_.jsx)(m,{className:`w-5 h-5`}),`Create Record`]})]})]})]})]})})}export{y as default};