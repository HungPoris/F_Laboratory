import{t as e}from"./circle-check-T5Aj_NOH.js";import{t}from"./funnel-BX6y-3pM.js";import{n,t as r}from"./useDebounce-Cx0DY7EU.js";import{n as i,t as a}from"./trash-2-D1o_3E3w.js";import{t as o}from"./plus-C7x6RT7r.js";import{t as s}from"./search-CVa8GsAv.js";import{t as c}from"./shield-check-BA-HeaCP.js";import{t as l}from"./shield-off-CnYuzpUG.js";import{A as u,D as d,K as f,Y as p,j as m,l as h,m as g,o as _,tt as v,y}from"./index-BK-GGJM4.js";import{a as b,r as x,s as S}from"./adminApi-DSTjBICF.js";import{t as C}from"./PaginationControls-B_SYzLFE.js";var w=v(p(),1),T=v(u(),1),E=async({code:e,name:t,description:n=``,active:r=!0,system:i=!1,privilegeIds:a=[]})=>{let o=(e||``).trim(),s=(t||``).trim();if(!o||!s)throw Error(`Code and name are required`);let c={code:o,name:s,description:n||``,active:r,system:i,privilegeIds:a||[]};return(await m.post(`/api/v1/admin/roles`,c)).data},D=async(e,{name:t,description:n,active:r,system:i,privilegeIds:a}={})=>{let o={};if(t!==void 0){let e=(t||``).trim();if(e===``)throw Error(`Name cannot be empty`);o.name=e}return n!==void 0&&(o.description=n??``),r!==void 0&&(o.active=r),i!==void 0&&(o.system=i),a!==void 0&&(o.privilegeIds=a||[]),(await m.put(`/api/v1/admin/roles/${e}`,o)).data},O=(e,t)=>t(`errors.${e?.response?.data?.code||e?.code||`UNKNOWN_ERROR`}`,{defaultValue:t(`errors.UNKNOWN_ERROR`)});function k({message:t,type:r=`success`,onClose:i}){(0,w.useEffect)(()=>{let e=setTimeout(i,4e3);return()=>clearTimeout(e)},[i]);let a={success:(0,T.jsx)(e,{className:`w-5 h-5`}),error:(0,T.jsx)(y,{className:`w-5 h-5`}),info:(0,T.jsx)(n,{className:`w-5 h-5`})};return(0,T.jsx)(`div`,{className:`fixed top-6 right-6 z-50 animate-slideIn font-sans`,children:(0,T.jsxs)(`div`,{className:`bg-gradient-to-r ${{success:`from-emerald-500 to-teal-500 shadow-emerald-500/30`,error:`from-red-500 to-pink-500 shadow-red-500/30`,info:`from-blue-500 to-indigo-500 shadow-blue-500/30`}[r]} text-white px-6 py-4 rounded-2xl shadow-2xl flex items-center gap-3 min-w-[320px]`,children:[a[r],(0,T.jsx)(`span`,{className:`flex-1 font-medium`,children:t}),(0,T.jsx)(`button`,{onClick:i,className:`hover:bg-white/20 p-1 rounded-lg transition-colors`,children:(0,T.jsx)(_,{className:`w-4 h-4`})})]})})}function A({title:e,text:t,type:r=`warning`,onConfirm:i,onCancel:o}){return(0,T.jsx)(`div`,{className:`fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm animate-fadeIn font-sans`,children:(0,T.jsx)(`div`,{className:`bg-white rounded-3xl shadow-2xl p-8 max-w-md w-full mx-4 animate-scaleIn`,children:(0,T.jsxs)(`div`,{className:`flex flex-col items-center text-center gap-4`,children:[{warning:(0,T.jsx)(y,{className:`w-16 h-16 text-orange-500`}),danger:(0,T.jsx)(a,{className:`w-16 h-16 text-red-500`}),question:(0,T.jsx)(n,{className:`w-16 h-16 text-blue-500`})}[r],(0,T.jsx)(`h3`,{className:`text-2xl font-bold text-gray-900`,children:e}),(0,T.jsx)(`p`,{className:`text-gray-600`,children:t}),(0,T.jsxs)(`div`,{className:`flex gap-3 mt-4 w-full`,children:[(0,T.jsx)(`button`,{onClick:o,className:`flex-1 px-6 py-3 rounded-xl border-2 border-gray-200 hover:bg-gray-50 font-semibold text-gray-700 transition-all duration-200`,children:`Cancel`}),(0,T.jsx)(`button`,{onClick:i,className:`flex-1 px-6 py-3 rounded-xl bg-gradient-to-r from-red-500 to-pink-500 hover:from-red-600 hover:to-pink-600 text-white font-semibold shadow-lg shadow-red-500/30 hover:shadow-red-500/50 transition-all duration-200`,children:`Confirm`})]})]})})})}function j({roleName:e=``}){let t=[`from-blue-400 to-blue-600`,`from-purple-400 to-purple-600`,`from-pink-400 to-pink-600`,`from-teal-400 to-teal-600`,`from-yellow-400 to-yellow-600`,`from-red-400 to-red-600`];return(0,T.jsx)(`div`,{className:`w-11 h-11 rounded-xl bg-gradient-to-br ${t[e?e.charCodeAt(0)%t.length:0]} flex items-center justify-center text-white shadow-lg`,children:(0,T.jsx)(h,{className:`w-6 h-6`})})}function M({isActive:e}){return e?(0,T.jsxs)(`div`,{className:`inline-flex items-center gap-2 font-sans`,children:[(0,T.jsxs)(`span`,{className:`relative flex h-3 w-3`,children:[(0,T.jsx)(`span`,{className:`animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75`}),(0,T.jsx)(`span`,{className:`relative inline-flex rounded-full h-3 w-3 bg-emerald-500`})]}),(0,T.jsx)(`span`,{className:`text-sm font-medium text-gray-700`,children:`Active`})]}):(0,T.jsxs)(`div`,{className:`inline-flex items-center gap-2 font-sans`,children:[(0,T.jsxs)(`span`,{className:`relative flex h-3 w-3`,children:[(0,T.jsx)(`span`,{className:`animate-ping absolute inline-flex h-full w-full rounded-full bg-gray-400 opacity-75`}),(0,T.jsx)(`span`,{className:`relative inline-flex rounded-full h-3 w-3 bg-gray-500`})]}),(0,T.jsx)(`span`,{className:`text-sm font-medium text-gray-700`,children:`Inactive`})]})}function N({size:e=40}){return(0,T.jsx)(`div`,{className:`flex items-center justify-center font-sans py-12`,children:(0,T.jsx)(`div`,{className:`shapes-5`,style:{width:e,height:e}})})}function P({children:e}){return(0,T.jsx)(`span`,{className:`px-2.5 py-1 rounded-xl text-xs font-medium bg-teal-50 text-teal-600 border border-teal-200`,children:e})}function F(e,t){(0,w.useEffect)(()=>{function n(n){!e.current||e.current.contains(n.target)||t(n)}return document.addEventListener(`mousedown`,n),document.addEventListener(`touchstart`,n),()=>{document.removeEventListener(`mousedown`,n),document.removeEventListener(`touchstart`,n)}},[e,t])}function I({open:e,mode:t,initialData:n,onClose:r,onSubmit:i}){let{t:a}=f(),[o,c]=(0,w.useState)(n?.code||``),[l,u]=(0,w.useState)(n?.name||``),[d,p]=(0,w.useState)(n?.description||``),[m,g]=(0,w.useState)(n?.systemRole||n?.isSystemRole||!1),[v,y]=(0,w.useState)([]),[x,S]=(0,w.useState)(``),[C,E]=(0,w.useState)(!1),[D,O]=(0,w.useState)(new Set(n?.privilegeIds||[])),[k,A]=(0,w.useState)(!1),j=(0,w.useRef)(null);F(j,()=>E(!1)),(0,w.useEffect)(()=>{e&&(c(n?.code||``),u(n?.name||``),p(n?.description||``),g(n?.systemRole||n?.isSystemRole||!1),O(new Set(n?.privilegeIds||[])),S(``),E(!1),b().then(e=>{if(y(e||[]),n?.privilegeCodes&&Array.isArray(n.privilegeCodes)){let t=new Set(n.privilegeCodes.map(e=>e)),r=(e||[]).filter(e=>e.code&&t.has(e.code)||e.name&&t.has(e.name)).map(e=>e.id).filter(Boolean);O(new Set(r))}else if(n?.privileges&&Array.isArray(n.privileges)){let t=new Set(n.privileges.map(e=>e)),r=(e||[]).filter(e=>e.code&&t.has(e.code)||e.name&&t.has(e.name)).map(e=>e.id).filter(Boolean);O(new Set(r))}else n?.privilegeIds&&Array.isArray(n.privilegeIds)?O(new Set(n?.privilegeIds)):O(new Set)}).catch(()=>{y([]),O(new Set)}))},[e,n]);let M=(0,w.useMemo)(()=>{if(!x)return v;let e=x.trim().toLowerCase();return v.filter(t=>(t.code||``).toLowerCase().includes(e)||(t.name||``).toLowerCase().includes(e)||(t.description||``).toLowerCase().includes(e)||(t.category||``).toLowerCase().includes(e))},[x,v]),N=(0,w.useMemo)(()=>M.map(e=>e.id).filter(Boolean),[M]),I=N.length>0&&N.every(e=>D.has(e)),L=D.size;function R(){let e=new Set(D);I?N.forEach(t=>e.delete(t)):N.forEach(t=>e.add(t)),O(e)}function z(e){let t=new Set(D);t.has(e)?t.delete(e):t.add(e),O(t)}async function B(e){e.preventDefault();let a=t===`create`?(o||``).trim():(n?.code||``).trim(),s=(l||n?.name||``).trim(),c=(d!=null&&d!==``?d:n?.description||``).toString(),u=typeof m==`boolean`?m:!!n?.systemRole||!!n?.isSystemRole;if(!(t===`create`&&(!a||!s))&&!(t===`edit`&&!s)){A(!0);try{await i({code:a,name:s,description:c,system:u,privilegeIds:Array.from(D)}),r()}finally{A(!1)}}}return e?(0,T.jsx)(`div`,{className:`fixed inset-0 z-[100] flex items-center justify-center bg-black/50 backdrop-blur-sm animate-fadeIn font-sans`,children:(0,T.jsxs)(`div`,{className:`bg-gradient-to-br from-gray-50 to-white w-full max-w-3xl mx-4 rounded-3xl shadow-2xl border border-gray-200 flex flex-col max-h-[90vh]`,children:[(0,T.jsxs)(`div`,{className:`p-6 bg-gradient-to-r from-teal-50 to-emerald-50 rounded-t-3xl border-b border-gray-200 flex items-center justify-between`,children:[(0,T.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,T.jsx)(`div`,{className:`w-11 h-11 rounded-2xl bg-gradient-to-br from-teal-500 to-emerald-500 flex items-center justify-center shadow-lg shadow-teal-500/30`,children:(0,T.jsx)(h,{className:`w-6 h-6 text-white`})}),(0,T.jsxs)(`div`,{children:[(0,T.jsx)(`div`,{className:`text-2xl font-bold text-gray-900`,children:t===`create`?`Create New Role`:`Edit Role`}),(0,T.jsx)(`div`,{className:`text-gray-500 text-sm`,children:`Enter role information and assign privileges`})]})]}),(0,T.jsx)(`button`,{onClick:r,className:`p-2 rounded-xl hover:bg-white transition`,children:(0,T.jsx)(_,{className:`w-5 h-5 text-gray-500`})})]}),(0,T.jsxs)(`form`,{onSubmit:B,className:`flex-1 overflow-y-auto p-6 space-y-5 overscroll-contain`,children:[(0,T.jsxs)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 gap-4`,children:[(0,T.jsxs)(`div`,{children:[(0,T.jsxs)(`div`,{className:`flex items-center justify-between mb-2`,children:[(0,T.jsx)(`label`,{className:`text-sm font-semibold text-gray-700`,children:`Role Code`}),(0,T.jsx)(P,{children:`Required`})]}),(0,T.jsx)(`input`,{value:o,onChange:e=>c(e.target.value.toUpperCase().replace(/\s+/g,`_`)),placeholder:`e.g., ADMIN, MANAGER`,className:`w-full px-4 py-3 rounded-2xl border-2 border-gray-200 focus:outline-none focus:ring-2 focus:ring-teal-500/20 focus:border-teal-500 font-mono bg-white ${t===`edit`?`bg-gray-50 text-gray-600 cursor-not-allowed`:``}`,disabled:t===`edit`})]}),(0,T.jsxs)(`div`,{children:[(0,T.jsxs)(`div`,{className:`flex items-center justify-between mb-2`,children:[(0,T.jsx)(`label`,{className:`text-sm font-semibold text-gray-700`,children:`Role Name`}),(0,T.jsx)(P,{children:`Required`})]}),(0,T.jsx)(`input`,{value:l,onChange:e=>u(e.target.value),placeholder:`e.g., System Administrator`,className:`w-full px-4 py-3 rounded-2xl border-2 border-gray-200 focus:outline-none focus:ring-2 focus:ring-teal-500/20 focus:border-teal-500 bg-white`})]})]}),(0,T.jsxs)(`div`,{children:[(0,T.jsxs)(`div`,{className:`flex items-center justify-between mb-2`,children:[(0,T.jsx)(`label`,{className:`text-sm font-semibold text-gray-700`,children:`Role Description`}),(0,T.jsx)(`span`,{className:`text-xs text-gray-400`,children:`Max 500 characters`})]}),(0,T.jsx)(`textarea`,{value:d,onChange:e=>p(e.target.value),rows:3,placeholder:`Brief description of the role`,className:`w-full px-4 py-3 rounded-2xl border-2 border-gray-200 focus:outline-none focus:ring-2 focus:ring-teal-500/20 focus:border-teal-500 bg-white`,maxLength:500})]}),(0,T.jsxs)(`div`,{className:`relative`,ref:j,children:[(0,T.jsxs)(`div`,{className:`flex items-center justify-between mb-2`,children:[(0,T.jsx)(`label`,{className:`text-sm font-semibold text-gray-700`,children:`Assign Privileges`}),(0,T.jsxs)(`div`,{className:`text-xs text-gray-500`,children:[L,` selected`]})]}),(0,T.jsxs)(`button`,{type:`button`,onClick:()=>E(e=>!e),className:`w-full px-4 py-3 rounded-2xl border-2 border-gray-200 bg-white flex items-center justify-between hover:border-gray-300`,children:[(0,T.jsx)(`span`,{className:`text-gray-600`,children:L>0?`${L} privileges selected`:`Select privileges...`}),C?(0,T.jsx)(_,{className:`w-4 h-4 text-gray-500`}):(0,T.jsx)(s,{className:`w-4 h-4 text-gray-500`})]}),C&&(0,T.jsxs)(`div`,{className:`absolute z-50 mt-2 w-full rounded-2xl border border-gray-200 bg-white shadow-xl`,children:[(0,T.jsxs)(`div`,{className:`p-3 border-b border-gray-100 sticky top-0 bg-white rounded-t-2xl`,children:[(0,T.jsxs)(`div`,{className:`relative`,children:[(0,T.jsx)(s,{className:`absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400`}),(0,T.jsx)(`input`,{value:x,onChange:e=>S(e.target.value),placeholder:`Search by code, name, description, category...`,className:`w-full pl-9 pr-3 py-2.5 rounded-xl border-2 border-gray-200 focus:outline-none focus:ring-2 focus:ring-teal-500/20 focus:border-teal-500`})]}),(0,T.jsxs)(`div`,{className:`flex items-center gap-3 mt-3`,children:[(0,T.jsx)(`button`,{type:`button`,onClick:R,className:`px-3 py-2 rounded-xl border-2 border-gray-200 hover:border-gray-300 hover:bg-gray-50 text-sm font-medium`,children:I?`Deselect All`:`Select All`}),(0,T.jsxs)(`div`,{className:`text-xs text-gray-500`,children:[M.length,` privileges shown`]})]})]}),(0,T.jsxs)(`div`,{className:`max-h-72 overflow-auto`,children:[M.map(e=>{let t=e.id;return(0,T.jsxs)(`label`,{className:`flex items-center gap-3 px-4 py-2.5 hover:bg-teal-50/50 cursor-pointer`,children:[(0,T.jsx)(`input`,{type:`checkbox`,checked:D.has(t),onChange:()=>z(t),className:`w-4 h-4 rounded border-2 border-gray-300 text-teal-600 focus:ring-teal-500`}),(0,T.jsxs)(`div`,{className:`flex-1`,children:[(0,T.jsx)(`div`,{className:`text-sm font-semibold text-gray-800`,children:e.name||e.description||e.code}),e.description&&e.description!==e.name&&(0,T.jsx)(`div`,{className:`text-xs text-gray-500`,children:e.description})]}),e.category&&(0,T.jsx)(`span`,{className:`px-2.5 py-1 rounded-xl text-xs font-medium bg-teal-50 text-teal-600 border border-teal-200`,children:e.category})]},t)}),M.length===0&&(0,T.jsx)(`div`,{className:`px-4 py-6 text-center text-sm text-gray-500`,children:`No matching privileges found`})]})]})]}),(0,T.jsx)(`div`,{className:`sticky bottom-0 pt-2 bg-gradient-to-br from-gray-50 to-white rounded-b-3xl`,children:(0,T.jsxs)(`div`,{className:`flex items-center justify-end gap-3 border-t border-gray-100 pt-4`,children:[(0,T.jsx)(`button`,{type:`button`,onClick:r,className:`px-5 py-3 rounded-2xl border-2 border-gray-200 hover:bg-gray-50 font-semibold text-gray-700`,disabled:k,children:`Cancel`}),(0,T.jsx)(`button`,{type:`submit`,disabled:k||t===`create`&&(!(o||``).trim()||!(l||``).trim()),className:`px-6 py-3 rounded-2xl text-white font-semibold shadow-lg shadow-teal-500/30 bg-gradient-to-r from-teal-500 to-emerald-500 hover:from-teal-600 hover:to-emerald-600 ${k?`opacity-70 cursor-not-allowed`:``}`,children:k?`Saving...`:t===`create`?`Create Role`:`Save Changes`})]})})]})]})}):null}function L({open:e,role:t,onClose:n}){let[r,i]=(0,w.useState)([]),[a,o]=(0,w.useState)(!1);if((0,w.useEffect)(()=>{e&&(o(!0),b().then(e=>i(e||[])).finally(()=>o(!1)))},[e]),!e||!t)return null;let s=Array.isArray(t.privilegeCodes)?new Set(t.privilegeCodes):null,c=Array.isArray(t.privilegeIds)?new Set(t.privilegeIds):null,l=r.filter(e=>c&&e.id?c.has(e.id):s&&(e.code||e.name)?s.has(e.code)||s.has(e.name):!1);return(0,T.jsx)(`div`,{className:`fixed inset-0 z-[100] flex items-center justify-center bg-black/50 backdrop-blur-sm animate-fadeIn font-sans`,children:(0,T.jsxs)(`div`,{className:`bg-gradient-to-br from-gray-50 to-white w-full max-w-2xl mx-4 rounded-3xl shadow-2xl border border-gray-200 flex flex-col max-h-[85vh]`,children:[(0,T.jsxs)(`div`,{className:`p-6 bg-gradient-to-r from-teal-50 to-emerald-50 rounded-t-3xl border-b border-gray-200 flex items-center justify-between`,children:[(0,T.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,T.jsx)(`div`,{className:`w-11 h-11 rounded-2xl bg-gradient-to-br from-teal-500 to-emerald-500 flex items-center justify-center shadow-lg shadow-teal-500/30`,children:(0,T.jsx)(g,{className:`w-6 h-6 text-white`})}),(0,T.jsxs)(`div`,{children:[(0,T.jsx)(`div`,{className:`text-2xl font-bold text-gray-900`,children:`Role Info`}),(0,T.jsx)(`div`,{className:`text-gray-500 text-sm`,children:`Details and assigned privileges`})]})]}),(0,T.jsx)(`button`,{onClick:n,className:`p-2 rounded-xl hover:bg-white transition`,children:(0,T.jsx)(_,{className:`w-5 h-5 text-gray-500`})})]}),(0,T.jsxs)(`div`,{className:`p-6 overflow-y-auto space-y-5`,children:[(0,T.jsxs)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 gap-4`,children:[(0,T.jsxs)(`div`,{className:`bg-white rounded-2xl border border-gray-200 p-4`,children:[(0,T.jsx)(`div`,{className:`text-xs uppercase text-gray-500 mb-1`,children:`Code`}),(0,T.jsx)(`div`,{className:`font-mono font-semibold text-gray-900`,children:t.code||t.id})]}),(0,T.jsxs)(`div`,{className:`bg-white rounded-2xl border border-gray-200 p-4`,children:[(0,T.jsx)(`div`,{className:`text-xs uppercase text-gray-500 mb-1`,children:`Name`}),(0,T.jsx)(`div`,{className:`font-semibold text-gray-900`,children:t.name})]}),(0,T.jsxs)(`div`,{className:`bg-white rounded-2xl border border-gray-200 p-4`,children:[(0,T.jsx)(`div`,{className:`text-xs uppercase text-gray-500 mb-1`,children:`Status`}),(0,T.jsx)(M,{isActive:t.active!==!1})]}),(0,T.jsxs)(`div`,{className:`bg-white rounded-2xl border border-gray-200 p-4`,children:[(0,T.jsx)(`div`,{className:`text-xs uppercase text-gray-500 mb-1`,children:`System`}),t.system?(0,T.jsx)(`span`,{className:`px-2.5 py-1 rounded-xl text-xs font-medium bg-purple-50 text-purple-600 border border-purple-200`,children:`System Role`}):(0,T.jsx)(`span`,{className:`px-2.5 py-1 rounded-xl text-xs font-medium bg-gray-50 text-gray-600 border border-gray-200`,children:`Normal Role`})]})]}),t.description&&(0,T.jsxs)(`div`,{className:`bg-white rounded-2xl border border-gray-200 p-4`,children:[(0,T.jsx)(`div`,{className:`text-xs uppercase text-gray-500 mb-2`,children:`Description`}),(0,T.jsx)(`div`,{className:`text-gray-800`,children:t.description})]}),(0,T.jsxs)(`div`,{className:`bg-white rounded-2xl border border-gray-200 p-4`,children:[(0,T.jsxs)(`div`,{className:`flex items-center justify-between mb-3`,children:[(0,T.jsx)(`div`,{className:`text-xs uppercase text-gray-500`,children:`Privileges`}),(0,T.jsx)(`div`,{className:`text-xs text-gray-400`,children:a?`Loading...`:`${l.length} items`})]}),(0,T.jsxs)(`div`,{className:`flex flex-wrap gap-2`,children:[a&&(0,T.jsx)(`span`,{className:`px-3 py-1.5 rounded-xl text-xs bg-gray-100 text-gray-500 border border-gray-200`,children:`Fetching privileges...`}),!a&&l.length===0&&(0,T.jsx)(`span`,{className:`px-3 py-1.5 rounded-xl text-xs bg-gray-100 text-gray-500 border border-gray-200`,children:`No privileges assigned`}),!a&&l.map(e=>(0,T.jsx)(`span`,{className:`px-3 py-1.5 rounded-xl text-xs font-medium bg-teal-50 text-teal-700 border border-teal-200`,title:e.description||e.name||e.code,children:e.code??e.name},e.id||e.code||e.name))]})]})]}),(0,T.jsx)(`div`,{className:`p-4 border-t border-gray-100 rounded-b-3xl bg-gradient-to-br from-gray-50 to-white flex justify-end`,children:(0,T.jsx)(`button`,{onClick:n,className:`px-5 py-3 rounded-2xl border-2 border-gray-200 hover:bg-gray-50 font-semibold text-gray-700`,children:`Close`})})]})})}function R(){let{t:e}=f();d();let[n,u]=(0,w.useState)([]),[p,m]=(0,w.useState)([]),[v,y]=(0,w.useState)(!1),[b,P]=(0,w.useState)(``),F=r(b,500),[R,z]=(0,w.useState)(null),[B,V]=(0,w.useState)(null),[ee,H]=(0,w.useState)(!1),[te,ne]=(0,w.useState)(!1),[U,re]=(0,w.useState)(null),[ie,ae]=(0,w.useState)(!1),[oe,se]=(0,w.useState)(null),[ce,W]=(0,w.useState)(!1),[G,le]=(0,w.useState)({code:``,name:``,status:`any`}),[K,q]=(0,w.useState)(0),[J,ue]=(0,w.useState)(10),[de,fe]=(0,w.useState)(0),[pe,me]=(0,w.useState)(1);async function Y(t=``,n=0,r=10,i=G){y(!0);try{let e=t.trim(),a=(i.code||``).trim(),o=(i.name||``).trim(),s=[];e&&s.push(e),a&&s.push(a),o&&s.push(o);let c={page:n,size:r},l=s.join(` `).trim();l&&(c.q=l),i.status&&i.status!==`any`&&(c.status=i.status);let d=await S(c),f=[],p=0,h=1;Array.isArray(d)?(f=d,p=d.length,h=1):d&&Array.isArray(d.content)?(f=d.content,p=d.totalElements||d.content.length,h=d.totalPages||1):(f=[],p=0,h=1),m(f),fe(p),me(h||1),n===0&&!e&&!a&&!o&&(i.status===`any`||!i.status)&&u(f)}catch(t){z({message:O(t,e),type:`error`}),m([]),fe(0),me(1)}finally{y(!1)}}(0,w.useEffect)(()=>{Y(``,0,J,G)},[]),(0,w.useEffect)(()=>{q(0)},[F,G.code,G.name,G.status]),(0,w.useEffect)(()=>{Y(F,K,J,G)},[K,J,F,G.code,G.name,G.status]);let he=(e,t=`success`)=>{z({message:e,type:t})},ge=e=>{V(e)},_e=t=>{let n=t.id;ge({title:`Confirm Delete`,text:`Are you sure you want to delete role "${t.name||``}"?`,type:`danger`,onConfirm:async()=>{try{await x(n),V(null),he(`Role deleted successfully!`,`success`),Y(F,K,J,G)}catch(t){V(null),he(O(t,e),`error`)}},onCancel:()=>V(null)})};async function ve(t){try{let{code:e,name:n,description:r,system:i,privilegeIds:a}=t,o=(e||``).trim(),s=(n||``).trim();if(!o||!s){z({message:`Code and name are required fields`,type:`error`});return}let c=await E({code:o,name:s,description:r||``,active:!0,system:!!i,privilegeIds:Array.isArray(a)?a:[]});m(e=>[c,...e]),z({message:`Role created successfully!`,type:`success`}),Y(F,K,J,G)}catch(t){z({message:O(t,e),type:`error`})}}async function ye(t){if(U)try{let e=(t?.name||U.name||``).trim();if(!e){z({message:`Role name cannot be empty`,type:`error`});return}let n={name:e,description:t?.description===void 0?U.description||``:t.description,active:t?.active===void 0?U.active!==!1:t.active,system:t?.system===void 0?U.system:t.system};Array.isArray(t?.privilegeIds)&&(n.privilegeIds=t.privilegeIds);let r=await D(U.id,n);m(e=>e.map(e=>e.id===U.id?r:e)),z({message:`Role updated successfully!`,type:`success`}),Y(F,K,J,G)}catch(t){z({message:O(t,e),type:`error`})}}let X=p,be=de,xe=pe||1,[Se,Z]=(0,w.useState)(G.code||``),[Ce,Q]=(0,w.useState)(G.name||``),[we,$]=(0,w.useState)(G.status||`any`);(0,w.useEffect)(()=>{Z(G.code||``),Q(G.name||``),$(G.status||`any`)},[G]);let Te=()=>{le({code:``,name:``,status:`any`}),Z(``),Q(``),$(`any`),W(!1)},Ee=()=>{W(!0)},De=()=>{W(!1)},Oe=e=>{q(e)},ke=e=>{ue(e),q(0)};return(0,T.jsxs)(`div`,{className:`p-6 bg-gradient-to-br from-gray-50 via-white to-teal-50/30 min-h-screen font-sans`,children:[R&&(0,T.jsx)(k,{...R,onClose:()=>z(null)}),B&&(0,T.jsx)(A,{...B}),(0,T.jsxs)(`div`,{className:`max-w-7xl mx-auto`,children:[(0,T.jsx)(`div`,{className:`mb-8`,children:(0,T.jsxs)(`div`,{className:`flex items-center gap-4 mb-3`,children:[(0,T.jsx)(`div`,{className:`w-12 h-12 rounded-2xl bg-gradient-to-br from-teal-500 to-emerald-500 flex items-center justify-center shadow-lg shadow-teal-500/30`,children:(0,T.jsx)(h,{className:`w-6 h-6 text-white`})}),(0,T.jsxs)(`div`,{children:[(0,T.jsx)(`h1`,{className:`text-4xl font-bold text-gray-900`,children:`Role Management`}),(0,T.jsx)(`p`,{className:`text-gray-500 mt-1`,children:`Manage and assign privileges to roles in the system`})]})]})}),(0,T.jsx)(`div`,{className:`grid grid-cols-1 md:grid-cols-3 gap-4 mb-6`,children:[{label:`Total Roles`,value:be,icon:h,iconColor:`text-teal-600`},{label:`Active`,value:n.filter(e=>e.active!==!1).length,icon:c,iconColor:`text-emerald-600`},{label:`Inactive`,value:n.filter(e=>e.active===!1).length,icon:l,iconColor:`text-gray-600`}].map((e,t)=>{let n=e.icon;return(0,T.jsx)(`div`,{className:`bg-white rounded-2xl p-5 shadow-sm border border-gray-200 hover:shadow-xl transition-all duration-300 hover:-translate-y-1`,children:(0,T.jsxs)(`div`,{className:`flex items-center justify-between`,children:[(0,T.jsxs)(`div`,{children:[(0,T.jsx)(`p`,{className:`text-gray-500 text-sm font-medium`,children:e.label}),(0,T.jsx)(`p`,{className:`text-3xl font-bold text-gray-900 mt-1`,children:e.value})]}),(0,T.jsx)(`div`,{className:`w-14 h-14 rounded-2xl bg-gray-50 flex items-center justify-center`,children:(0,T.jsx)(n,{className:`w-8 h-8 ${e.iconColor}`})})]})},t)})}),(0,T.jsxs)(`div`,{className:`bg-white rounded-3xl shadow-xl border border-gray-200 overflow-hidden`,children:[(0,T.jsx)(`div`,{className:`p-6 border-b border-gray-200 bg-gradient-to-r from-gray-50 to-white`,children:(0,T.jsxs)(`div`,{className:`flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between`,children:[(0,T.jsx)(`div`,{className:`flex-1 w-full sm:w-auto`,children:(0,T.jsxs)(`div`,{className:`relative group`,children:[(0,T.jsx)(s,{className:`absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 group-focus-within:text-teal-500 transition-colors`}),(0,T.jsx)(`input`,{value:b,onChange:e=>P(e.target.value),onKeyDown:e=>{e.key===`Enter`&&(e.preventDefault(),Y(e.target.value,0,J,G))},placeholder:`Search by role name, role code...`,className:`w-full pl-12 pr-4 py-3.5 border-2 border-gray-200 rounded-2xl focus:outline-none focus:ring-2 focus:ring-teal-500/20 focus:border-teal-500 transition-all bg-white`})]})}),(0,T.jsxs)(`div`,{className:`flex gap-3`,children:[(0,T.jsxs)(`button`,{onClick:Ee,className:`px-5 py-3.5 rounded-2xl border-2 border-gray-200 hover:border-gray-300 hover:bg-gray-50 transition-all duration-200 flex items-center gap-2 text-gray-700 font-medium hover:shadow-lg`,children:[(0,T.jsx)(t,{className:`w-4 h-4`}),(0,T.jsx)(`span`,{className:`hidden sm:inline`,children:`Filter`})]}),(0,T.jsxs)(`button`,{onClick:()=>H(!0),className:`px-6 py-3.5 rounded-2xl bg-gradient-to-r from-teal-500 to-emerald-500 hover:from-teal-600 hover:to-emerald-600 text-white font-semibold transition-all duration-200 flex items-center gap-2 shadow-lg shadow-teal-500/40 hover:shadow-teal-500/60 hover:-translate-y-0.5`,children:[(0,T.jsx)(o,{className:`w-5 h-5`}),(0,T.jsx)(`span`,{children:`Add Role`})]})]})]})}),v?(0,T.jsx)(`div`,{className:`py-24`,children:(0,T.jsx)(N,{size:50})}):(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(`div`,{className:`overflow-x-auto`,style:{overflow:`visible`},children:(0,T.jsxs)(`table`,{className:`w-full`,children:[(0,T.jsx)(`thead`,{children:(0,T.jsxs)(`tr`,{className:`bg-gray-50`,children:[(0,T.jsx)(`th`,{className:`text-left px-6 py-4 text-xs font-bold text-gray-600 uppercase tracking-wider`,children:(0,T.jsx)(`div`,{className:`flex items-center gap-2`,children:(0,T.jsx)(`span`,{children:`Role Code`})})}),(0,T.jsx)(`th`,{className:`text-left px-6 py-4 text-xs font-bold text-gray-600 uppercase tracking-wider`,children:(0,T.jsx)(`div`,{className:`flex items-center gap-2`,children:(0,T.jsx)(`span`,{children:`Role Name`})})}),(0,T.jsx)(`th`,{className:`text-center px-6 py-4 text-xs font-bold text-gray-600 uppercase tracking-wider`,children:(0,T.jsx)(`div`,{className:`flex items-center justify-center gap-2`,children:(0,T.jsx)(`span`,{children:`Status`})})}),(0,T.jsx)(`th`,{className:`text-center px-6 py-4 text-xs font-bold text-gray-600 uppercase tracking-wider`,children:`Actions`})]})}),(0,T.jsxs)(`tbody`,{className:`divide-y divide-gray-100`,children:[X.map((e,t)=>{let n=e.active!==!1;return(0,T.jsxs)(`tr`,{className:`hover:bg-gradient-to-r hover:from-teal-50/30 hover:to-transparent transition-all duration-200 group`,style:{animation:`slideUp 0.4s ease-out ${t*.05}s both`},children:[(0,T.jsx)(`td`,{className:`px-6 py-5`,children:(0,T.jsxs)(`div`,{className:`flex items-center gap-4`,children:[(0,T.jsx)(j,{roleName:e.name||``}),(0,T.jsx)(`div`,{children:(0,T.jsx)(`div`,{className:`font-mono text-sm font-semibold text-gray-900 group-hover:text-teal-600 transition-colors`,children:e.code||e.id})})]})}),(0,T.jsxs)(`td`,{className:`px-6 py-5`,children:[(0,T.jsx)(`div`,{className:`font-semibold text-gray-900`,children:e.name}),e.description&&(0,T.jsx)(`div`,{className:`text-sm text-gray-500 mt-1`,children:e.description})]}),(0,T.jsx)(`td`,{className:`px-6 py-5`,children:(0,T.jsx)(`div`,{className:`flex justify-center`,children:(0,T.jsx)(M,{isActive:n})})}),(0,T.jsx)(`td`,{className:`px-6 py-5`,children:(0,T.jsxs)(`div`,{className:`flex items-center justify-center gap-1`,children:[(0,T.jsx)(`button`,{onClick:()=>{se(e),ae(!0)},className:`p-2.5 rounded-xl hover:bg-blue-50 transition-all duration-200 group/btn hover:scale-110`,title:`View`,children:(0,T.jsx)(g,{className:`w-4 h-4 text-gray-400 group-hover/btn:text-blue-600 transition-colors`})}),(0,T.jsx)(`button`,{onClick:()=>{re(e),ne(!0)},className:`p-2.5 rounded-xl hover:bg-green-50 transition-all duration-200 group/btn hover:scale-110`,title:`Edit`,children:(0,T.jsx)(i,{className:`w-4 h-4 text-gray-400 group-hover/btn:text-green-600 transition-colors`})}),(0,T.jsx)(`button`,{onClick:()=>_e(e),className:`p-2.5 rounded-xl hover:bg-red-50 transition-all duration-200 group/btn hover:scale-110`,title:`Delete`,children:(0,T.jsx)(a,{className:`w-4 h-4 text-gray-400 group-hover/btn:text-red-600 transition-colors`})})]})})]},e.id)}),X.length===0&&(0,T.jsx)(`tr`,{children:(0,T.jsx)(`td`,{colSpan:4,className:`px-6 py-20 text-center`,children:(0,T.jsxs)(`div`,{className:`flex flex-col items-center gap-4`,children:[(0,T.jsx)(`div`,{className:`w-20 h-20 rounded-full bg-gradient-to-br from-gray-100 to-gray-200 flex items-center justify-center`,children:(0,T.jsx)(h,{className:`w-10 h-10 text-gray-400`})}),(0,T.jsxs)(`div`,{children:[(0,T.jsx)(`div`,{className:`text-gray-700 font-semibold text-lg`,children:`No roles found`}),(0,T.jsx)(`div`,{className:`text-sm text-gray-500 mt-1`,children:`Try changing your search keywords or filters`})]})]})})})]})]})}),(0,T.jsx)(C,{page:K,size:J,currentPageSize:X.length,totalElements:be,totalPages:xe,onPageChange:Oe,onSizeChange:ke})]})]})]}),(0,T.jsx)(I,{open:ee,mode:`create`,initialData:null,onClose:()=>H(!1),onSubmit:ve}),(0,T.jsx)(I,{open:te,mode:`edit`,initialData:U?{id:U.id,code:U.code,name:U.name,description:U.description,systemRole:U.system===!0,privilegeCodes:U.privilegeCodes||[],privilegeIds:[]}:null,onClose:()=>{ne(!1),re(null)},onSubmit:ye}),(0,T.jsx)(L,{open:ie,role:oe,onClose:()=>{ae(!1),se(null)}}),ce&&(0,T.jsx)(`div`,{className:`fixed inset-0 z-50 flex items-center justify-center bg-black/40`,children:(0,T.jsxs)(`div`,{className:`bg-white rounded-2xl shadow-xl p-6 w-full max-w-lg`,children:[(0,T.jsxs)(`div`,{className:`flex items-center justify-between mb-4`,children:[(0,T.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,T.jsx)(t,{className:`w-6 h-6 text-teal-600`}),(0,T.jsx)(`div`,{className:`text-lg font-semibold`,children:`Filter roles`})]}),(0,T.jsx)(`button`,{onClick:De,className:`p-2 rounded-md hover:bg-gray-100`,children:(0,T.jsx)(_,{className:`w-5 h-5 text-gray-600`})})]}),(0,T.jsxs)(`div`,{className:`space-y-4`,children:[(0,T.jsxs)(`div`,{children:[(0,T.jsx)(`label`,{className:`text-sm text-gray-600 block mb-1`,children:`Role Code`}),(0,T.jsx)(`input`,{value:Se,onChange:e=>Z(e.target.value),placeholder:`Filter by code`,className:`w-full px-3 py-2 rounded-md border border-gray-200`})]}),(0,T.jsxs)(`div`,{children:[(0,T.jsx)(`label`,{className:`text-sm text-gray-600 block mb-1`,children:`Role Name`}),(0,T.jsx)(`input`,{value:Ce,onChange:e=>Q(e.target.value),placeholder:`Filter by name`,className:`w-full px-3 py-2 rounded-md border border-gray-200`})]}),(0,T.jsxs)(`div`,{children:[(0,T.jsx)(`label`,{className:`text-sm text-gray-600 block mb-1`,children:`Status`}),(0,T.jsxs)(`select`,{value:we,onChange:e=>$(e.target.value),className:`w-full px-3 py-2 rounded-md border border-gray-200`,children:[(0,T.jsx)(`option`,{value:`any`,children:`Any`}),(0,T.jsx)(`option`,{value:`active`,children:`Active`}),(0,T.jsx)(`option`,{value:`inactive`,children:`Inactive`})]})]})]}),(0,T.jsxs)(`div`,{className:`flex justify-end gap-3 mt-6`,children:[(0,T.jsx)(`button`,{onClick:Te,className:`px-4 py-2 rounded-md border border-gray-200`,children:`Reset`}),(0,T.jsx)(`button`,{onClick:()=>{le({code:Se,name:Ce,status:we}),W(!1)},className:`px-4 py-2 rounded-md bg-teal-600 text-white`,children:`Apply`})]})]})}),(0,T.jsx)(`style`,{children:`
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes slideIn { from { opacity: 0; transform: translateX(100px); } to { opacity: 1; transform: translateX(0); } }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes scaleIn { from { opacity: 0; transform: scale(0.9); } to { opacity: 1; transform: scale(1); } }
        .shapes-5 {
          width: 40px;
          aspect-ratio: 1;
          --c: no-repeat linear-gradient(#14b8a6 0 0);
          background:
            var(--c) 0%   100%,
            var(--c) 50%  100%,
            var(--c) 100% 100%;
          animation: sh5 1s infinite linear;
        }
        @keyframes sh5 {
          0%   {background-size: 20% 100%,20% 100%,20% 100%}
          33%  {background-size: 20% 10% ,20% 100%,20% 100%}
          50%  {background-size: 20% 100%,20% 10% ,20% 100%}
          66%  {background-size: 20% 100%,20% 100%,20% 10% }
          100% {background-size: 20% 100%,20% 100%,20% 100%}
        }
      `})]})}export{R as default};