import{A as e,C as t,D as n,G as r,O as i,W as a,Y as o,tt as s}from"./index-BK-GGJM4.js";import{t as c}from"./PaginationControls-B_SYzLFE.js";var l=s(o(),1),u=s(a(),1),d=s(e(),1),f=`https://be2.flaboratory.cloud`;function p(){let{patientId:e}=i(),a=n(),[o,s]=(0,l.useState)(null),[p,m]=(0,l.useState)(!0),[h,g]=(0,l.useState)([]),[_,v]=(0,l.useState)([]),[y,b]=(0,l.useState)(!1),[x,S]=(0,l.useState)(0),[C,w]=(0,l.useState)(10),[T,E]=(0,l.useState)(0),[D,O]=(0,l.useState)(0),k=async(e,t={})=>{let n=localStorage.getItem(`lm.access`);return r({url:`${f}${e}`,...t,headers:{Authorization:`Bearer ${n}`,"Content-Type":`application/json`,...t.headers},withCredentials:!0})};(0,l.useEffect)(()=>{A(),M()},[e]);let A=async()=>{try{m(!0),s((await k(`/api/v1/patients/${e}`)).data)}catch{u.default.fire({icon:`error`,title:`Error`,text:`Failed to load patient details`})}finally{m(!1)}},j=(e,t=x,n=C)=>{let r=e.length,i=r===0?0:Math.ceil(r/n),a=i===0?0:Math.min(t,i-1),o=a*n;g(e.slice(o,o+n)),O(r),E(i),S(a)},M=async()=>{try{b(!0);let t=(await k(`/api/v1/patients/${e}/medical-records`)).data||[];v(t),j(t,0,C)}catch(e){console.error(`Error loading medical records:`,e),v([]),j([],0,C)}finally{b(!1)}},N=async t=>{if((await u.default.fire({title:`Delete medical record?`,text:`This action cannot be undone!`,icon:`warning`,showCancelButton:!0,confirmButtonColor:`#d33`,cancelButtonColor:`#3085d6`,confirmButtonText:`Yes, delete it`})).isConfirmed)try{await k(`/api/v1/patients/${e}/medical-records/${t}`,{method:`DELETE`}),u.default.fire({icon:`success`,title:`Deleted!`,text:`Medical record has been deleted.`,timer:1500}),await M()}catch(e){u.default.fire({icon:`error`,title:`Error`,text:e.response?.data?.message||`Failed to delete record`})}},P=async()=>{if((await u.default.fire({title:`Are you sure?`,text:`This action cannot be undone!`,icon:`warning`,showCancelButton:!0,confirmButtonColor:`#d33`,cancelButtonColor:`#3085d6`,confirmButtonText:`Yes, delete it!`})).isConfirmed)try{await k(`/api/v1/patients/${e}`,{method:`DELETE`}),u.default.fire({icon:`success`,title:`Deleted!`,text:`Patient has been deleted.`,timer:1500}),a(`/patients`)}catch(e){u.default.fire({icon:`error`,title:`Error`,text:e.response?.data?.message||`Failed to delete patient`})}},F=e=>{j(_,e,C)},I=e=>{let t=Number(e)||10;w(t),j(_,0,t)};return p?(0,d.jsx)(`div`,{className:`flex items-center justify-center min-h-screen bg-gradient-to-br from-cyan-50 via-blue-50 to-teal-50`,children:(0,d.jsxs)(`div`,{className:`text-center`,children:[(0,d.jsx)(`div`,{className:`inline-block animate-spin rounded-full h-16 w-16 border-4 border-cyan-200 border-t-cyan-600 mb-4`}),(0,d.jsx)(`p`,{className:`text-gray-700 font-medium`,children:`Loading patient details...`})]})}):o?(0,d.jsx)(`div`,{className:`min-h-screen bg-gradient-to-br from-cyan-50 via-blue-50 to-teal-50`,children:(0,d.jsxs)(`div`,{className:`container mx-auto px-6 py-8`,children:[(0,d.jsxs)(t,{to:`/patients`,className:`inline-flex items-center text-cyan-600 hover:text-teal-600 font-medium mb-4`,children:[(0,d.jsx)(`svg`,{className:`w-5 h-5 mr-2`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,d.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M10 19l-7-7m0 0l7-7m-7 7h18`})}),`Back to Patient List`]}),(0,d.jsxs)(`div`,{className:`flex flex-col md:flex-row md:items-center md:justify-between bg-white rounded-lg shadow-md p-6 border-l-4 border-cyan-500 mb-8`,children:[(0,d.jsx)(`h1`,{className:`text-3xl font-bold text-gray-800`,children:`Patient Details`}),(0,d.jsxs)(`div`,{className:`flex gap-3 mt-4 md:mt-0`,children:[(0,d.jsxs)(t,{to:`/patients/${e}/edit`,className:`inline-flex items-center gap-2 px-5 py-2 bg-teal-50 text-teal-600 rounded-md hover:bg-teal-100 transition-colors duration-150 font-medium`,children:[(0,d.jsx)(`svg`,{className:`w-5 h-5`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,d.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z`})}),`Edit`]}),(0,d.jsxs)(`button`,{onClick:P,className:`inline-flex items-center gap-2 px-5 py-2 bg-red-50 text-red-600 rounded-md hover:bg-red-100 transition-colors duration-150 font-medium`,children:[(0,d.jsx)(`svg`,{className:`w-5 h-5`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,d.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16`})}),`Delete`]})]})]}),(0,d.jsxs)(`div`,{className:`bg-white rounded-lg shadow-md p-6 border-l-4 border-cyan-500 mb-8`,children:[(0,d.jsx)(`h2`,{className:`text-xl font-semibold text-gray-800 mb-4 border-b pb-2`,children:`Personal Information`}),(0,d.jsx)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6`,children:[[`Patient ID`,(o.patientId||o.id).slice(0,6).toUpperCase()],[`Full Name`,o.fullName||o.name],[`Date of Birth`,o.dob||o.dateOfBirth],[`Gender`,o.gender],[`Phone Number`,o.contactNumber||o.phoneNumber],[`Email`,o.email||`N/A`],[`Address`,o.address||`N/A`]].map(([e,t])=>(0,d.jsxs)(`div`,{children:[(0,d.jsx)(`label`,{className:`block text-sm font-medium text-gray-500 mb-1`,children:e}),(0,d.jsx)(`p`,{className:`text-gray-900 font-medium`,children:t})]},e))})]}),(0,d.jsxs)(`div`,{className:`bg-white rounded-lg shadow-md p-6 border-l-4 border-cyan-500`,children:[(0,d.jsxs)(`div`,{className:`flex items-center justify-between mb-4`,children:[(0,d.jsx)(`h2`,{className:`text-xl font-semibold text-gray-800`,children:`Medical Records`}),(0,d.jsxs)(t,{to:`/patients/${e}/medical-records/new`,className:`inline-flex items-center gap-2 bg-gradient-to-r from-cyan-500 to-teal-500 text-white px-5 py-2 rounded-md hover:from-cyan-600 hover:to-teal-600 shadow-md hover:shadow-lg transition-all duration-200 font-medium`,children:[(0,d.jsx)(`svg`,{className:`w-5 h-5`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,d.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M12 4v16m8-8H4`})}),`Add Medical Record`]})]}),y?(0,d.jsxs)(`div`,{className:`text-center py-8`,children:[(0,d.jsx)(`div`,{className:`inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-cyan-600`}),(0,d.jsx)(`p`,{className:`mt-2 text-gray-600`,children:`Loading medical records...`})]}):h.length>0?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(`div`,{className:`overflow-x-auto`,children:(0,d.jsxs)(`table`,{className:`min-w-full divide-y divide-gray-200`,children:[(0,d.jsx)(`thead`,{className:`bg-gray-50`,children:(0,d.jsx)(`tr`,{children:[`DATE`,`DIAGNOSIS`,`DEPARTMENTS`,`ACTIONS`].map(e=>(0,d.jsx)(`th`,{className:`px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider`,children:e},e))})}),(0,d.jsx)(`tbody`,{className:`bg-white divide-y divide-gray-100`,children:h.map(n=>{let r=Array.isArray(n.departments)?n.departments.join(`, `):n.department||`N/A`;return(0,d.jsxs)(`tr`,{className:`hover:bg-cyan-50 transition-colors duration-150`,children:[(0,d.jsx)(`td`,{className:`px-6 py-4 text-sm text-gray-700`,children:n.visitDate?new Date(n.visitDate).toLocaleDateString():`N/A`}),(0,d.jsx)(`td`,{className:`px-6 py-4 text-sm text-gray-700`,children:n.diagnosis||`N/A`}),(0,d.jsx)(`td`,{className:`px-6 py-4 text-sm text-gray-700`,children:r}),(0,d.jsx)(`td`,{className:`px-6 py-4 text-sm font-medium`,children:(0,d.jsx)(`div`,{className:`flex flex-col gap-1`,children:(0,d.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,d.jsxs)(t,{to:`/patients/${e}/medical-records/${n.medicalRecordId}`,className:`inline-flex items-center gap-1 px-3 py-1.5 bg-cyan-50 text-cyan-600 rounded-md hover:bg-cyan-100 transition-colors duration-150 font-medium`,children:[(0,d.jsxs)(`svg`,{className:`w-4 h-4`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:[(0,d.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M15 12a3 3 0 11-6 0 3 3 0 016 0z`}),(0,d.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z`})]}),`View`]}),(0,d.jsxs)(t,{to:`/patients/${e}/medical-records/${n.medicalRecordId}/edit`,className:`inline-flex items-center gap-1 px-3 py-1.5 bg-teal-50 text-teal-600 rounded-md hover:bg-teal-100 transition-colors duration-150 font-medium`,children:[(0,d.jsx)(`svg`,{className:`w-4 h-4`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,d.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z`})}),`Edit`]}),(0,d.jsxs)(`button`,{onClick:()=>N(n.medicalRecordId),className:`inline-flex items-center gap-1 px-3 py-1.5 bg-red-50 text-red-600 rounded-md hover:bg-red-100 transition-colors duration-150 font-medium`,children:[(0,d.jsx)(`svg`,{className:`w-4 h-4`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,d.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16`})}),`Delete`]})]})})})]},n.medicalRecordId)})})]})}),(0,d.jsx)(c,{page:x,size:C,currentPageSize:h.length,totalElements:D,totalPages:T,onPageChange:e=>F(e),onSizeChange:e=>I(e)})]}):(0,d.jsx)(`div`,{className:`text-center py-12 text-gray-500 font-medium`,children:`No medical records`})]})]})}):(0,d.jsxs)(`div`,{className:`container mx-auto px-4 py-6 text-center`,children:[(0,d.jsx)(`h1`,{className:`text-2xl font-bold mt-4 mb-2 text-gray-800`,children:`Patient Not Found`}),(0,d.jsx)(t,{to:`/patients`,className:`inline-flex items-center text-cyan-600 hover:text-teal-600 font-medium`,children:`‚Üê Back to Patient List`})]})}export{p as default};