spring.application.name=LaboratoryManagement-backend

security.service-api.patterns=/internal/**

spring.data.redis.host=
spring.data.redis.port=
spring.data.redis.password=
spring.data.redis.ssl.enabled=false
spring.data.redis.timeout=1s
spring.data.redis.lettuce.pool.max-active=64
spring.data.redis.lettuce.pool.max-idle=16
spring.data.redis.lettuce.pool.min-idle=4
spring.data.redis.lettuce.pool.time-between-eviction-runs=60s
app.cache.ttl.user-seconds=900
app.cache.ttl.permission-seconds=900
app.redis.key-prefix=prod
spring.redis.key-prefix=prod:


app.otp.fail.ttl-seconds=600
app.otp.fail.prefix=iam:login:failed:
app.redis.lock.prefix=iam:user:
app.jwt.blacklist.prefix=iam:jwt:blacklist:
app.jwt.user.tokens.prefix=iam:jwt:user:

spring.rabbitmq.host=localhost
spring.rabbitmq.port=5672
spring.rabbitmq.username=guest
spring.rabbitmq.password=guest
spring.rabbitmq.virtual-host=/
spring.rabbitmq.template.mandatory=true
spring.rabbitmq.publisher-confirm-type=correlated
spring.rabbitmq.listener.simple.acknowledge-mode=AUTO
spring.rabbitmq.listener.simple.default-requeue-rejected=false

spring.kafka.bootstrap-servers=localhost:9092
spring.kafka.client-id=lm-backend
spring.kafka.consumer.group-id=lm-group
spring.kafka.consumer.auto-offset-reset=earliest
spring.kafka.consumer.enable-auto-commit=false
spring.kafka.consumer.key-deserializer=org.apache.kafka.common.serialization.StringDeserializer
spring.kafka.consumer.value-deserializer=org.springframework.kafka.support.serializer.JsonDeserializer
spring.kafka.consumer.properties.spring.json.trusted.packages=*
spring.kafka.producer.acks=all
spring.kafka.producer.retries=3
spring.kafka.producer.key-serializer=org.apache.kafka.common.serialization.StringSerializer
spring.kafka.producer.value-serializer=org.springframework.kafka.support.serializer.JsonSerializer
spring.kafka.producer.properties.max.in.flight.requests.per.connection=1

server.port=8080
spring.main.web-application-type=servlet
server.forward-headers-strategy=framework
app.url.frontend=http://localhost:5173
app.cookie.domain=

security.lockout.enabled=true
security.lockout.max-attempts=5
security.lockout.daily-reset-cron=0 0 23 * * *
security.lockout.zone-id=Asia/Ho_Chi_Minh
scheduler.tokens.cleanup-hourly-cron=0 0 * * * *
scheduler.tokens.cleanup-daily-cron=0 0 3 * * *
app.account.inactive-days=90

server.ssl.enabled=false
spring.datasource.url=
spring.datasource.username=
spring.datasource.password=
spring.datasource.driver-class-name=org.postgresql.Driver
spring.datasource.hikari.maximum-pool-size=15
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.auto-commit=false

spring.jpa.open-in-view=false
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.default_schema=
spring.jpa.properties.hibernate.jdbc.time_zone=UTC
spring.jpa.show-sql=false

spring.flyway.enabled=true
spring.flyway.schemas=
spring.flyway.locations=classpath:db/migration
spring.flyway.baseline-on-migrate=true
spring.flyway.clean-disabled=true

jwt.secret=dev_dev_dev_dev_dev_dev_dev_dev_32Bmin
jwt.issuer=laboratory-management
jwt.access.minutes=15
jwt.refresh.days=30
app.jwt.secret=${jwt.secret}
app.jwt.issuer=${jwt.issuer}
app.jwt.access.minutes=${jwt.access.minutes}
app.jwt.refresh.days=${jwt.refresh.days}
app.jwt.userrev.prefix=iam:jwt:userrevoked:
app.jwt.blacklist.ttl-seconds=900

app.otp.fail.threshold=5
app.otp.prefix=iam:otp:forgot:
app.otp.ttl-seconds=600
app.otp.rate.prefix=iam:otp:rate:
app.otp.rate.window-seconds=60
app.otp.rate.max-per-window=5

notify.exchange.name=notify.exchange
notify.queue.name=lab.notify.queue
notify.routing.key=notify.#

outbox.publisher.delay-ms=5000
outbox.publisher.batch-size=50
outbox.publisher.max-attempts=3
outbox.publisher.interval-ms=3000
outbox.publisher.backoff-ms=500

spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=
spring.mail.password=
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true
spring.mail.test-connection=true
mail.from=

app.cloudflare.enforce=false
cloudflare.trust.enabled=true
cloudflare.trust.require-https=true
cloudflare.trust.headers.client-ip=CF-Connecting-IP

spring.data.mongodb.uri=

spring.jackson.time-zone=UTC
app.audit.ttl-days=180
app.mongo.ttl.enabled=false

app.cors.allow-credentials=true
app.cors.allowed-origins=http://localhost:5173,https://flaboratory.cloud,https://app.flaboratory.cloud,https://iam.flaboratory.cloud,https://web.flaboratory.cloud
app.cors.allowed-methods=GET,POST,PUT,PATCH,DELETE,OPTIONS
app.cors.allowed-headers=Authorization,Content-Type,X-Requested-With,Accept,Origin,x-correlation-id,x-request-id,X-Refresh-Token,X-API-KEY
app.cors.exposed-headers=Authorization


management.endpoints.web.exposure.include=health,info,prometheus
management.endpoint.health.probes.enabled=true
management.health.redis.enabled=true
management.health.rabbit.enabled=true
management.health.mongo.enabled=true

security.rate.auth.limit=10
security.rate.auth.window-seconds=60

logging.level.root=INFO
logging.level.fpt.com.laboratorymanagementbackend=DEBUG
logging.level.org.springframework.security=INFO
logging.level.org.springframework.web=INFO
#logging.level.org.hibernate.SQL=DEBUG
#logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE
#logging.level.org.hibernate.SQL=DEBUG
#logging.level.org.hibernate.type.descriptor.sql=TRACE

