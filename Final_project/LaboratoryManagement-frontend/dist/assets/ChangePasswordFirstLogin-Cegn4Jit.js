import{A as e,D as t,E as n,H as r,K as i,L as a,M as o,R as s,U as c,Y as l,d as u,f as d,h as f,j as p,l as m,m as h,tt as g,v as _,y as v,z as y}from"./index-BK-GGJM4.js";var b=g(l(),1),x=g(e(),1);function S(){let{t:e}=i(),l=t(),g=n(),[S,C]=(0,b.useState)(``),[w,T]=(0,b.useState)(``),[E,D]=(0,b.useState)(``),[O,k]=(0,b.useState)(!1),[A,j]=(0,b.useState)(!1),[M,N]=(0,b.useState)(!1),[P,F]=(0,b.useState)(!1),[I,L]=(0,b.useState)(!1),[R,z]=(0,b.useState)(null),[B,V]=(0,b.useState)(``),[H,U]=(0,b.useState)(0),W=(0,b.useRef)(!1),[G,K]=(0,b.useState)({hasMinLength:!1,hasUppercase:!1,hasLowercase:!1,hasNumber:!1,hasSpecial:!1});(0,b.useEffect)(()=>{let e=e=>{e.preventDefault(),e.returnValue=``};return window.addEventListener(`beforeunload`,e),()=>{window.removeEventListener(`beforeunload`,e)}},[]),(0,b.useEffect)(()=>{g.state?.isFirstLogin?g.state?.loginType&&s(g.state.loginType):(c(`Please login first`),l(a(),{replace:!0}))},[g,l]),(0,b.useEffect)(()=>{if(H<19){let e=setTimeout(()=>{V(e=>e+`secure your account`[H]),U(e=>e+1)},100);return()=>clearTimeout(e)}},[H]),(0,b.useEffect)(()=>{K(w?{hasMinLength:w.length>=8,hasUppercase:/[A-Z]/.test(w),hasLowercase:/[a-z]/.test(w),hasNumber:/[0-9]/.test(w),hasSpecial:/[!@#$%^&*(),.?":{}|<>]/.test(w)}:{hasMinLength:!1,hasUppercase:!1,hasLowercase:!1,hasNumber:!1,hasSpecial:!1})},[w]);function q(t,n=null){if(!t||typeof t!=`object`)return n===401?e(`errors.UNAUTHORIZED`,{defaultValue:`Unauthorized`}):n===403?e(`errors.FORBIDDEN`,{defaultValue:`Forbidden`}):e(`errors.UNKNOWN_ERROR`,{defaultValue:`Unknown error`});if(t.message&&typeof t.message==`string`){let e=t.message.trim();if(e&&!/^[A-Z0-9_]+$/.test(e)&&!/^[a-z0-9_]+$/.test(e))return e}let r=t.error||t.code||t.message||null;if(!r&&t.errors&&typeof t.errors==`object`)try{let e=Object.values(t.errors).flat();e.length&&(r=e[0])}catch{}if(r){let t=String(r).trim().toUpperCase(),n=e(`errors.${t}`,{defaultValue:``});if(n&&n!==`errors.${t}`)return n}return n===401?e(`errors.UNAUTHORIZED`,{defaultValue:`Unauthorized`}):n===403?e(`errors.FORBIDDEN`,{defaultValue:`Forbidden`}):e(`errors.UNKNOWN_ERROR`,{defaultValue:`Unknown error`})}let J=()=>S?w?E?w.length<8?e(`errors.PASSWORD_TOO_SHORT`,{defaultValue:`Password must be at least 8 characters long`}):w===S?e(`errors.PASSWORD_SAME_AS_OLD`,{defaultValue:`New password must be different from current password`}):w===E?!G.hasUppercase||!G.hasLowercase||!G.hasNumber?e(`errors.WEAK_PASSWORD`,{defaultValue:`Password must meet all security requirements`}):null:e(`errors.PASSWORD_MISMATCH`,{defaultValue:`Passwords do not match`}):e(`errors.CONFIRM_PASSWORD_REQUIRED`,{defaultValue:`Please confirm your new password`}):e(`errors.NEW_PASSWORD_REQUIRED`,{defaultValue:`New password is required`}):e(`errors.PASSWORD_REQUIRED`,{defaultValue:`Current password is required`}),Y=async()=>{if(W.current)return;let t=J();if(t){z(t);return}z(null),F(!0),W.current=!0;try{await p.post(`/api/v1/profile/change-password-first-login`,{currentPassword:S,newPassword:w,confirmPassword:E}),L(!0),r(e(`auth.first_login_password_changed`,{defaultValue:`Password changed successfully! Please login with your new password.`})),o(),setTimeout(()=>{l(a(),{replace:!0})},2e3)}catch(t){let n=q(t?.response?.data,t?.response?.status)||e(`errors.UNKNOWN_ERROR`,{defaultValue:`Failed to change password. Please try again.`});z(n),y(n)}finally{F(!1),W.current=!1}},X=e=>{e.key===`Enter`&&Y()},Z=({met:e,label:t})=>(0,x.jsxs)(`div`,{className:`flex items-center gap-2 text-xs`,children:[e?(0,x.jsx)(_,{className:`w-4 h-4 text-emerald-500`}):(0,x.jsx)(v,{className:`w-4 h-4 text-gray-300`}),(0,x.jsx)(`span`,{className:e?`text-emerald-600`:`text-gray-400`,children:t})]});return(0,x.jsxs)(`div`,{className:`min-h-screen bg-gradient-to-br from-blue-50 via-cyan-50 to-emerald-50 flex items-center justify-center px-4 py-6 md:py-10 overflow-hidden`,children:[I&&(0,x.jsx)(`div`,{className:`fixed inset-0 bg-gradient-to-br from-blue-600 to-emerald-500 z-50 flex items-center justify-center animate-fade-in`,children:(0,x.jsxs)(`div`,{className:`text-center animate-scale-in`,children:[(0,x.jsx)(`div`,{className:`w-24 h-24 bg-white rounded-full flex items-center justify-center mb-6 mx-auto animate-bounce-once`,children:(0,x.jsx)(`svg`,{className:`w-12 h-12 text-emerald-500`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,x.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:`3`,d:`M5 13l4 4L19 7`})})}),(0,x.jsx)(`h2`,{className:`text-3xl md:text-4xl font-bold text-white mb-2`,children:e(`auth.password_changed_success`,{defaultValue:`Password Changed!`})}),(0,x.jsx)(`p`,{className:`text-blue-100 text-base md:text-lg`,children:e(`auth.redirecting_to_login`,{defaultValue:`Redirecting to login...`})})]})}),(0,x.jsxs)(`div`,{className:`w-full max-w-[1200px] lg:grid lg:grid-cols-2 items-center gap-12`,children:[(0,x.jsxs)(`div`,{className:`flex flex-col justify-center animate-slide-in-left`,children:[(0,x.jsxs)(`div`,{className:`mb-8 md:mb-10`,children:[(0,x.jsxs)(`div`,{className:`flex items-center gap-2 mb-6 md:mb-8 animate-bounce-in`,style:{animationDelay:`0.2s`},children:[(0,x.jsx)(`div`,{className:`w-8 h-8 bg-gradient-to-br from-blue-600 to-cyan-500 rounded-lg flex items-center justify-center`,children:(0,x.jsx)(`div`,{className:`text-white text-xl font-bold`,children:`+`})}),(0,x.jsx)(`span`,{className:`text-gray-800 font-semibold text-base md:text-lg`,children:`F-Laboratory Cloud`})]}),(0,x.jsx)(`h1`,{className:`text-4xl md:text-5xl font-bold mb-3 md:mb-4 animate-fade-in`,style:{animationDelay:`0.3s`},children:e(`auth.first_time_here`,{defaultValue:`First time here?`})}),(0,x.jsx)(`h2`,{className:`text-4xl md:text-5xl font-bold mb-5 md:mb-6`,children:(0,x.jsxs)(`span`,{className:`text-transparent bg-clip-text bg-gradient-to-r from-blue-500 via-cyan-500 to-emerald-500 inline-block`,children:[B,(0,x.jsx)(`span`,{className:`animate-blink`,children:`|`})]})}),(0,x.jsx)(`p`,{className:`text-gray-600 mb-6 md:mb-8 text-base md:text-lg animate-fade-in`,style:{animationDelay:`0.5s`},children:e(`auth.first_login_description`,{defaultValue:`For security purposes, you must change your temporary password before accessing the system.`})}),(0,x.jsx)(`div`,{className:`space-y-3 text-gray-700`,children:[{text:e(`auth.tip_strong_password`,{defaultValue:`Create a strong, unique password`}),icon:d},{text:e(`auth.tip_meet_requirements`,{defaultValue:`Must meet all security requirements`}),icon:m},{text:e(`auth.tip_different_password`,{defaultValue:`Different from your temporary password`}),icon:u}].map((e,t)=>{let n=e.icon;return(0,x.jsxs)(`div`,{className:`flex items-center gap-3 animate-slide-in-left`,style:{animationDelay:`${.6+t*.1}s`},children:[(0,x.jsx)(`div`,{className:`w-5 h-5 flex items-center justify-center`,children:(0,x.jsx)(n,{className:`w-5 h-5 text-emerald-500`})}),(0,x.jsx)(`span`,{children:e.text})]},t)})})]}),(0,x.jsxs)(`div`,{className:`bg-white rounded-2xl shadow-lg p-5 md:p-6 max-w-md animate-float`,style:{animationDelay:`0.9s`},children:[(0,x.jsxs)(`div`,{className:`flex gap-2 mb-4`,children:[(0,x.jsx)(`div`,{className:`w-3 h-3 rounded-full bg-red-400 animate-pulse`}),(0,x.jsx)(`div`,{className:`w-3 h-3 rounded-full bg-yellow-400 animate-pulse`}),(0,x.jsx)(`div`,{className:`w-3 h-3 rounded-full bg-green-400 animate-pulse`})]}),(0,x.jsxs)(`div`,{className:`space-y-3`,children:[(0,x.jsxs)(`div`,{className:`flex items-center gap-3 p-3 bg-gradient-to-r from-blue-50 to-cyan-50 rounded-lg`,children:[(0,x.jsx)(m,{className:`w-6 h-6 text-blue-500`}),(0,x.jsxs)(`div`,{className:`flex-1`,children:[(0,x.jsx)(`div`,{className:`h-2 bg-gray-200 rounded-full w-full mb-2`}),(0,x.jsx)(`div`,{className:`h-2 bg-gray-200 rounded-full w-2/3`})]})]}),(0,x.jsxs)(`div`,{className:`flex items-center gap-3 p-3 bg-gradient-to-r from-emerald-50 to-green-50 rounded-lg`,children:[(0,x.jsx)(d,{className:`w-6 h-6 text-emerald-500`}),(0,x.jsxs)(`div`,{className:`flex-1`,children:[(0,x.jsx)(`div`,{className:`h-2 bg-gray-200 rounded-full w-full mb-2`}),(0,x.jsx)(`div`,{className:`h-2 bg-gray-200 rounded-full w-3/4`})]})]})]})]})]}),(0,x.jsxs)(`div`,{className:`w-full max-w-lg mx-auto animate-pop-in`,style:{animationDelay:`0.4s`},children:[(0,x.jsxs)(`div`,{className:`bg-white rounded-3xl shadow-xl p-8 md:p-10 transform transition-all duration-300 hover:shadow-2xl`,children:[(0,x.jsxs)(`div`,{className:`mb-6`,children:[(0,x.jsx)(`h3`,{className:`text-2xl md:text-3xl font-bold text-gray-800 mb-2`,children:e(`auth.change_password_title`,{defaultValue:`Change Your Password`})}),(0,x.jsx)(`p`,{className:`text-gray-500 text-sm`,children:e(`auth.change_password_subtitle`,{defaultValue:`Create a new secure password for your account`})})]}),(0,x.jsxs)(`div`,{className:`space-y-5`,children:[(0,x.jsxs)(`div`,{className:`transition-all duration-300 hover:translate-x-1`,children:[(0,x.jsxs)(`label`,{className:`flex items-center gap-2 text-sm font-medium text-gray-700 mb-2`,children:[(0,x.jsx)(u,{className:`w-4 h-4`}),e(`profile.current_password`,{defaultValue:`Current Password`})]}),(0,x.jsxs)(`div`,{className:`relative`,children:[(0,x.jsx)(`input`,{type:O?`text`:`password`,value:S,onChange:e=>C(e.target.value),onKeyPress:X,placeholder:e(`auth.enter_temp_password`,{defaultValue:`Enter your current password`}),className:`w-full px-4 py-3 pr-12 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all bg-slate-50`}),(0,x.jsx)(`button`,{type:`button`,onClick:()=>k(!O),className:`absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors`,children:O?(0,x.jsx)(f,{className:`w-5 h-5`}):(0,x.jsx)(h,{className:`w-5 h-5`})})]})]}),(0,x.jsxs)(`div`,{className:`transition-all duration-300 hover:translate-x-1`,children:[(0,x.jsxs)(`label`,{className:`flex items-center gap-2 text-sm font-medium text-gray-700 mb-2`,children:[(0,x.jsx)(d,{className:`w-4 h-4`}),e(`profile.new_password`,{defaultValue:`New Password`})]}),(0,x.jsxs)(`div`,{className:`relative`,children:[(0,x.jsx)(`input`,{type:A?`text`:`password`,value:w,onChange:e=>T(e.target.value),onKeyPress:X,placeholder:e(`profile.new_password_placeholder`,{defaultValue:`Enter your new password`}),className:`w-full px-4 py-3 pr-12 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all bg-slate-50`}),(0,x.jsx)(`button`,{type:`button`,onClick:()=>j(!A),className:`absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors`,children:A?(0,x.jsx)(f,{className:`w-5 h-5`}):(0,x.jsx)(h,{className:`w-5 h-5`})})]})]}),w&&(0,x.jsxs)(`div`,{className:`p-4 bg-blue-50 rounded-lg border border-blue-100 space-y-2`,children:[(0,x.jsx)(`p`,{className:`text-xs font-semibold text-gray-700 mb-2`,children:e(`profile.password_requirements`,{defaultValue:`Password Requirements:`})}),(0,x.jsx)(Z,{met:G.hasMinLength,label:e(`profile.req_length`,{defaultValue:`At least 8 characters`})}),(0,x.jsx)(Z,{met:G.hasUppercase,label:e(`profile.req_uppercase`,{defaultValue:`One uppercase letter (A-Z)`})}),(0,x.jsx)(Z,{met:G.hasLowercase,label:e(`profile.req_lowercase`,{defaultValue:`One lowercase letter (a-z)`})}),(0,x.jsx)(Z,{met:G.hasNumber,label:e(`profile.req_number`,{defaultValue:`One number (0-9)`})})]}),(0,x.jsxs)(`div`,{className:`transition-all duration-300 hover:translate-x-1`,children:[(0,x.jsxs)(`label`,{className:`flex items-center gap-2 text-sm font-medium text-gray-700 mb-2`,children:[(0,x.jsx)(m,{className:`w-4 h-4`}),e(`profile.confirm_new_password`,{defaultValue:`Confirm New Password`})]}),(0,x.jsxs)(`div`,{className:`relative`,children:[(0,x.jsx)(`input`,{type:M?`text`:`password`,value:E,onChange:e=>D(e.target.value),onKeyPress:X,placeholder:e(`profile.confirm_new_password_placeholder`,{defaultValue:`Confirm your new password`}),className:`w-full px-4 py-3 pr-12 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all bg-slate-50`}),(0,x.jsx)(`button`,{type:`button`,onClick:()=>N(!M),className:`absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors`,children:M?(0,x.jsx)(f,{className:`w-5 h-5`}):(0,x.jsx)(h,{className:`w-5 h-5`})})]})]}),R&&(0,x.jsx)(`div`,{className:`p-4 bg-red-50 border border-red-200 rounded-lg animate-fade-in`,children:(0,x.jsx)(`p`,{className:`text-sm text-red-600`,children:R})}),(0,x.jsx)(`button`,{onClick:Y,disabled:P,className:`w-full py-3.5 bg-gradient-to-r from-blue-500 to-emerald-500 text-white font-semibold rounded-lg hover:shadow-lg hover:shadow-blue-200 transition-all hover:scale-105 active:scale-95 disabled:opacity-70 disabled:cursor-not-allowed`,children:P?(0,x.jsxs)(`div`,{className:`flex items-center justify-center gap-2`,children:[(0,x.jsx)(`div`,{className:`w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin`}),(0,x.jsx)(`span`,{children:e(`common.processing`,{defaultValue:`Changing Password...`})})]}):e(`auth.set_new_password`,{defaultValue:`Change Password`})})]}),(0,x.jsxs)(`div`,{className:`mt-8 pt-6 border-t border-gray-200`,children:[(0,x.jsxs)(`h4`,{className:`text-sm font-semibold text-gray-700 mb-4 flex items-center gap-2`,children:[(0,x.jsx)(m,{className:`w-4 h-4 text-blue-600`}),e(`auth.security_tips_title`,{defaultValue:`Password Security Tips`})]}),(0,x.jsxs)(`div`,{className:`space-y-3`,children:[(0,x.jsxs)(`div`,{className:`flex items-start gap-3 text-xs text-gray-600`,children:[(0,x.jsx)(d,{className:`w-4 h-4 text-emerald-500 mt-0.5 flex-shrink-0`}),(0,x.jsx)(`p`,{children:e(`auth.tip_unique`,{defaultValue:`Use a unique password that you don't use for other accounts.`})})]}),(0,x.jsxs)(`div`,{className:`flex items-start gap-3 text-xs text-gray-600`,children:[(0,x.jsx)(m,{className:`w-4 h-4 text-emerald-500 mt-0.5 flex-shrink-0`}),(0,x.jsx)(`p`,{children:e(`auth.tip_avoid_personal`,{defaultValue:`Avoid using personal information like birthdays or names.`})})]}),(0,x.jsxs)(`div`,{className:`flex items-start gap-3 text-xs text-gray-600`,children:[(0,x.jsx)(u,{className:`w-4 h-4 text-emerald-500 mt-0.5 flex-shrink-0`}),(0,x.jsx)(`p`,{children:e(`auth.tip_password_manager`,{defaultValue:`Consider using a password manager to generate and store passwords.`})})]})]})]}),(0,x.jsx)(`div`,{className:`mt-6 p-4 bg-amber-50 rounded-lg border border-amber-200`,children:(0,x.jsxs)(`p`,{className:`text-xs text-amber-800 leading-relaxed`,children:[(0,x.jsx)(`strong`,{children:e(`common.important`,{defaultValue:`Important:`})}),` `,e(`auth.first_login_footer`,{defaultValue:`After changing your password, you will be redirected to the login page. Please use your new password to sign in.`})]})})]}),(0,x.jsx)(`div`,{className:`mt-6 text-center text-xs text-gray-500 animate-fade-in`,style:{animationDelay:`1.2s`},children:`© 2025 F-Laboratory Cloud — Security • Terms • Support`})]})]}),(0,x.jsx)(`style`,{children:`
        @keyframes slide-in-left { from { opacity: 0; transform: translateX(-50px); } to { opacity: 1; transform: translateX(0); } }
        @keyframes pop-in { 0% { opacity: 0; transform: scale(0.8) translateY(20px); } 50% { transform: scale(1.05); } 100% { opacity: 1; transform: scale(1) translateY(0); } }
        @keyframes fade-in { from { opacity: 0; } to { opacity: 1; } }
        @keyframes bounce-in { 0% { opacity: 0; transform: scale(0.3); } 50% { transform: scale(1.1); } 100% { opacity: 1; transform: scale(1); } }
        @keyframes float { 0%,100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
        @keyframes blink { 0%,100% { opacity: 1; } 50% { opacity: 0; } }
        @keyframes scale-in { from { transform: scale(0); } to { transform: scale(1); } }
        @keyframes bounce-once { 0%,100% { transform: translateY(0); } 25% { transform: translateY(-20px); } 50% { transform: translateY(0); } 75% { transform: translateY(-10px); } }
        .animate-slide-in-left { animation: slide-in-left .6s ease-out forwards; opacity: 0; }
        .animate-pop-in { animation: pop-in .6s cubic-bezier(.175,.885,.32,1.275) forwards; opacity: 0; }
        .animate-fade-in { animation: fade-in .6s ease-out forwards; opacity: 0; }
        .animate-bounce-in { animation: bounce-in .6s ease-out forwards; opacity: 0; }
        .animate-float { animation: float 3s ease-in-out infinite; }
        .animate-blink { animation: blink 1s step-end infinite; }
        .animate-scale-in { animation: scale-in .5s cubic-bezier(.175,.885,.32,1.275); }
        .animate-bounce-once { animation: bounce-once 1s ease; }
      `})]})}export{S as default};